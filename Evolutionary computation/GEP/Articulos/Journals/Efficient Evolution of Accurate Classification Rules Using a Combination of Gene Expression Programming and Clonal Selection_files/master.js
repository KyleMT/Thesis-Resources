var ep = window.ep || {}; ep.bundles = ep.bundles || []; ep.bundles = ep.bundles.concat('bundled/_layout2/master.js','ep/common/common.js', 'ep/modaldialog.js', 'ep/widgets/uidialog.js', 'ep/widgets/epmodal.js', 'ep/widgets/eppopup.js', 'ep/epdialog.js', 'ep/common/customevents.js', 'ep/common/displayutilities.js', 'ep/common/keyevent.js', 'ep/controller/control/simplemenu.js', 'ep/common/popupwin.js', 'ep/utilities.js', 'ep/extension/number.js', 'ep/updatefolder.js', 'ep/ep.js', 'ep/util/globalloader.js', 'ep/util/jtemplateparser.js', 'ep/util/json.js', 'json2/json2.js', 'ep/util/iframe.js', 'ep/base/controller.js', 'ep/base/pagecontroller.js', 'ep/base/modulecontroller.js', 'ep/manager/clientstatemanager.js', 'ep/util/expandcollapse.js', 'ep/controller/collapsiblecontroller.js', 'ep/controller/control/optionscontrolsdropdowns.js', 'ep/util/url.js', 'ep/controller/control/customerlogo.js', 'ep/jqueryplugins/watermark.js', 'jquery/plugins/jquery.validate-1.9.0.js', 'ep/jqueryplugins/jqueryvalidate_ep.js', 'ep/jqueryplugins/whitespace.js');
if(!window.ep){ep=function(){return{version:1}}()}if(!ep.messages){ep.messages={}}ep.InternetExplorerVersion=function(){var d=null;var c=navigator.appVersion.match(/MSIE ([\d\.]+)/);if(c){d=parseFloat(c[1])}return d}();ep.ie6SelectFix=function(b){if(ep.InternetExplorerVersion!==6){return}if(!ep.selects||!ep.selects.length){ep.selects=jQuery("select")}if(b){ep.selects.removeClass("hide")}else{ep.selects.addClass("hide")}};var debug_mode=false;function getXmlHttpObject(){var b=null;if(window.XMLHttpRequest){b=new XMLHttpRequest()}else{if(window.ActiveXObject){b=new ActiveXObject("Microsoft.XMLHTTP");if(!b){b=new ActiveXObject("Msxml2.XMLHTTP")}}}return b}ep.isAjaxEnabled=function(){var h=false;if(document.forms.length>0){var g=getXmlHttpObject();h=g?true:false;var e=h?"enabled":"disabled";var f=document.createElement("input");f.type="hidden";f.id="ajax";f.name="ajax";f.value=e;if(document.forms.length>0){document.forms[0].appendChild(f)}}return h}();function errorHandler(){if(debug_mode){var b="ERROR: "+arguments[0];b+=arguments[1]?"\nURL: "+arguments[1]:"";b+=arguments[2]?"\nLINE: "+arguments[2]:"";alert(b)}}if(debug_mode){window.onerror=errorHandler}function getClientId(e,d){var f=null;if(e&&e!==""){if(e.indexOf(d)>-1){f=e.split(d)[e.split(d).length-1]}else{f=e}}return f}var getElementByClientId=function(c,d){return jQuery(d).find('[id$="_'+c+'"]')[0]};function getPostBackForm(){return document.forms[0]}function getElementById(c){var d=document.getElementById(c);if(!d){d=getElementByClientId(c,(typeof(theForm)!=="undefined"&&theForm)?theForm:getPostBackForm())}return d}ep.getScreenResolution=function(){var b=document.getElementById("__ScreenResolution");if(b){b.value=screen.width+" : "+screen.height}};function getPostBackPage(f,d){var e=(f.action.length>0)?f.action:window.location.pathname+window.location.search;if(d){return((e.indexOf("?")>0)?e.split("?")[0]:e)}else{return(e)}}function getFormActionParams(c,d){return((c.action.indexOf("?")>0)?d+c.action.split("?")[1]:"")}function getPageName(b){if(!b){return""}else{if(b.indexOf("?")>-1){return b.substring(0,b.indexOf("?"))}else{return b}}}function getUpdatedFormAction(c,d){return getPageName(d)+getFormActionParams(c,"?")}function getFormActionWithUpdatedVID(g,f,e){var h=getFormActionParams(g,"");if(/^\d+$/.test(e)){h=h.replace(/vid=\d+/i,"vid="+e)}return(h!=="")?getPageName(f)+"?"+h:f}function stopCurrentEvent(b){if(b){b.returnValue=false;if(b.cancelable){b.preventDefault()}}}function closePopup(f){var d=getElementByClientId("messageBox",getPostBackForm());if(d){d.style.visibility="hidden"}var e=document.getElementById("coverScreen");if(e){e.style.visibility="hidden"}if(typeof(aAjaxCallBack)!=="undefined"){if(aAjaxCallBack&&aAjaxCallBack.redirect&&aAjaxCallBack.redirect!==""&&!aAjaxCallBack.autoRedirect){aAjaxCallBack.redirectToPage(aAjaxCallBack.redirect)}}stopCurrentEvent(f)}function ClearTarget(){var b=document.getElementById("target");if(b){b.parentNode.removeChild(b)}return true}ep.isBodyRTL=function(){return document.body.getAttribute("dir")==="rtl"};ep.togglePanel=function(m,j,q){var o=q==="openOnly"?true:false;var l=q==="closeOnly"?true:false;var r=jQuery("#"+j);if(!r.length){r=jQuery(getElementByClientId(j,getPostBackForm()))}var k=jQuery("#"+m);if(!k.length){k=jQuery(getElementByClientId(m,getPostBackForm()))}var p=m.indexOf("left")>0?"Left":"Right";var n=jQuery(getElementByClientId(p.toLowerCase()+"PanelState",getPostBackForm()));if(r.length&&k.length){if(r.hasClass("panels"+p+"Open")&&!o){r.removeClass("panels"+p+"Open");r.addClass("panels"+p+"Closed");k.title=ep.messages["show"+p+"Panel"];if(n.length){n.val("hidden")}}else{if(r.hasClass("panels"+p+"Closed")&&!l){r.removeClass("panels"+p+"Closed");r.addClass("panels"+p+"Open");k.title=ep.messages["hide"+p+"Panel"];if(n.length){n.val("visible")}}}}};ep.hidePanel=function(c,d){ep.togglePanel(c,d,"closeOnly")};ep.showPanel=function(c,d){ep.togglePanel(c,d,"openOnly")};function Mid(i,h,f){if(h<0||f<0){return""}var j,g=String(i).length;if(h+f>g){j=g}else{j=h+f}return String(i).substring(h,j)}function onInputBoxKeyPress(c){var d=c?c:window.event;return onkeypress_event(d,"SearchButton")}ep.updateSearchMode=function(){var r=jQuery(),s,n=jQuery(),m,o,q=jQuery(),t,p,x;function w(){if(!o){o=true;var b=jQuery();var c=jQuery("#searchModeList");var a=jQuery("#FirstFindFieldIdHolder");if(a.length){b=jQuery("#"+a.val())}if(!b.length){return}if(c.length){r=c.find("input[type='radio']");r.bind("click",ep.updateSearchMode)}if(b.is("INPUT")){n=b}else{if(b.is("TEXTAREA")){q=b}}var d=jQuery("#FirstFindFieldTagIdHolder").val();var e=jQuery("#FirstFindFieldInLabelHolder").val();t=jQuery("#"+d+", #"+e);a=jQuery("#FirstFindFieldRowMeasure");if(a.length){s=jQuery("#"+a.val()).width()}else{s=b.width()}m=b.parent();p=true}}function u(){if(!q.length){q=jQuery("<textarea/>").attr({id:n.attr("id"),name:n.attr("name"),"class":n.attr("class"),rows:6,accesskey:2}).width(s)}t.hide();if(n.length){q.html(n.val());n.replaceWith(q);q.trigger("ep_searchModeUpdated")}}function v(){if(!n.length){n=jQuery("<input/>").attr({id:q.attr("id"),name:q.attr("name"),accesskey:2,size:t.length>0?28:53,"class":q.attr("class")});if(t.length===0){n.width(s)}}if(!n.parent().length&&q.length){n.val(q.html());q.replaceWith(n);t.show();n.trigger("ep_searchModeUpdated")}}return function(){w();if(p!==true){return}var b;if(r.length){b=r.filter(":checked").val()}else{var a=jQuery("#CurrentSearchMode");if(a.length){b=a.val()}}if(b==="Smart"){u()}else{if(x==="Smart"){v()}}x=b}}();ep.showAllDbs=function(){var d=jQuery("#showAllLink"),c=jQuery("#extendedDatabases, #showLessLink");if(d.length){d.hide()}if(c.length){c.css("display","inline")}};ep.showLessDbs=function(){var c=jQuery("#showAllLink"),d=jQuery("#extendedDatabases, #showLessLink");if(c.length){c.show()}if(d.length){d.hide()}};function showHistoryTerm(m,n){var k=document.getElementById(m);var i=n?k:null;var l=n?null:k;var p=k.parentNode;while(p&&p.tagName.toUpperCase()!=="TD"){p=p.parentNode}if(p){var j=getElementByClientId("fullterm",p);var o=getElementByClientId("truncterm",p);if(n){l=getElementByClientId("showless",p);j.style.display=l.style.display="inline";i.style.display=o.style.display="none"}else{i=getElementByClientId("ellipsis",p);j.style.display=l.style.display="none";o.style.display=i.style.display="inline"}}}function runAJAX(c,d){aFormAction=document.forms[0].action.toString().replace(/(\/*)[\w\d]*?(\?)/,"$1"+c+"$2");jQuery.ajax({type:"post",url:aFormAction,data:d})}function GoToArticle(b){window.location.href=ep.SyncFormVid(b)}ep.SyncFormVid=function(g){var h=/vid=(\d+)/.exec(g);if(h&&h.length===2){var f=parseInt(h[1],10);var j=document.getElementById("__vid");if(j&&/^\d+$/.test(j.value)){var i=parseInt(j.value,10);if(i===f+1){g=g.replace("vid="+f,"vid="+i)}}}return g};ep.toggleThemes=function(l,g,i,h){var j=l.split(",");var k=jQuery("#"+j[0]).hasClass("hidden-theme")?h:i;jQuery("#"+g).text(k).attr("title",k);j.each(function(a){jQuery("#"+a).toggleClass("hidden-theme")});return false};ep.URLEncode=function(b){b=encodeURIComponent(b);b=b.replace(/\+/g,"%2B");return b};ep.URLDecode=function(b){b=b.replace(/\+/g," ");b=decodeURIComponent(b);return b};ep.getUrlParam=function(f){var h=[],i;var g=window.location.search.slice(1).split("&");for(var j=0;j<g.length;j++){if(g[j].length>0){i=g[j].split("=");h.push(i[0]);h[i[0]]=i[1]}}return h[f]};ep.buildHostURL=function(){var b=window.location.protocol+"//"+window.location.host+window.location.pathname+"?vid="+ep.getUrlParam("vid")+"&sid="+ep.getUrlParam("sid");return b};String.prototype.startsWith=function(b){return this.length>=b.length&&this.substr(0,b.length)===b};String.prototype.endsWith=function(b){return this.length>=b.length&&this.substr(this.length-b.length)===b};String.prototype.parseQuery=function(){var n=this.indexOf("?");var i=this.indexOf("#");var m=this;if(n>0){m=this.substring(n+1,i>0?i:this.length)}var k={};var l=m.split("&");for(var h=0;h<l.length;h++){var j=l[h].split("=");k[decodeURIComponent(j[0])]=decodeURIComponent(j[1])}return k};if(!ep.dialog){ep.dialog=function(){return{version:1}}()}ep.dialog.ModalDialog=Class.create({content:"",initialize:function(f,e){f=$(f);if(ep.dialog.HoverPopup){ep.dialog.HoverPopup.hideHover()}if(f){var d=jQuery.proxy(this.show,this);jQuery(f).click(function(){d();return false});this.trigger=f}if(e){Object.extend(this,e)}},initDisplay:function(){var l=document.body.appendChild(new Element("div",{waiRole:"dialog"}));l.className="modal-dialog";if(this.cssClass){l.addClassName(this.cssClass)}l.setStyle({display:"none"});var i=new Element("span",{tabIndex:0});i.className="modal-close";l.insert(i);i.update("<span>Close</span>");i.observe("click",this.hide.bind(this));var g=function(a){this.handleCloseKeyPress(a)}.bindAsEventListener(this);i.observe("keydown",g);var k=new Element("div");k.className="modal-content";l.insert(k);var h=new Element("span",{tabIndex:0}).update(" ");h.className="modal-tab-end";l.insert(h);var j=function(){this.display.container.firstChild.focus()}.bindAsEventListener(this);h.observe("focus",j);this.display={container:l,closeElement:i,contentElement:k}},show:function(){if(!this.previousAspForm&&window.theForm){this.previousAspForm=theForm}if(!this.display){this.initDisplay()}this.displayLoadDialog();if(!this.coverScreen){this.coverScreen=$("modal-screen")}if(!this.coverScreen||!this.coverScreen.visible()){this.layoutScreen();if(this.screenOpacity){this.coverScreen.appear({from:0,to:this.screenOpacity,duration:0.5})}else{this.coverScreen.appear({from:0,to:0.8,duration:0.5})}}if(!this.troublesomeElements){this.troublesomeElements=navigator.appVersion.match(/MSIE 6/)===null?[]:$$("select")}this.troublesomeElements.invoke("setStyle",{visibility:"hidden"});if(this.content){this.render()}else{if(this.command&&!this.href){var g=window.location.href.replace(/\/\w+\?/,"/"+this.command+"?");g=g.split("#")[0];var e=document.getElementById("__vid").value;if(e){g=g.replace(/vid=\d+/,"vid="+e)}this.href=g}if(this.href){var f=this.render.bind(this);var h=new Ajax.Request(this.href,{method:"get",onSuccess:function(a){f(a.responseText)},onFailure:function(){f("We're sorry, an error occurred.")}})}else{this.render("An error has occurred and there is nothing to display")}}},render:function(c){jQuery(this.loadDialog).stop(true,true).fadeOut("normal");if(c){var d=c.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(d){this.content=d[1]}else{this.content=c}}this.display.contentElement.update(this.content);this.layout();this.display.container.appear({from:0,to:1,duration:0.5,afterFinish:this.renderComplete.bind(this)});this.childForms=this.display.contentElement.select("form");if(window.theForm&&this.childForms.length>0){theForm=this.childForms[0]}this.childForms.each(function(a){a.dialog=this;if(Object.isFunction(this.onSubmit)){Event.observe(a,"submit",this.onSubmit)}}.bind(this));if(Object.isFunction(this.onRender)){this.onRender()}},renderComplete:function(){this.focusTitle();jQuery(this.loadDialog).fadeOut("normal")},focusTitle:function(){if(Object.isString(this.titleElement)){var b=this.display.contentElement.down(this.titleElement);if(b){b.tabIndex=0;b.focus()}}},layout:function(){if(this.display){this.display.container.setStyle({position:"absolute",top:"-10000px",left:"0px",display:"block"});var e=this.display.container.getDimensions();var h=document.viewport.getDimensions();var f=document.viewport.getScrollOffsets();if(Prototype.Browser.IE&&ep.InternetExplorerVersion<7){h={height:document.body.clientHeight,width:document.body.clientWidth}}this.display.container.hide();var g=f.top+10;if(e.height<h.height){g=f.top+h.height/2-e.height/2}this.display.container.setStyle({top:g+"px",left:(f.left+h.width/2-e.width/2)+"px"});this.display.closeElement.absolutize()}},displayLoadDialog:function(d){if(!d){d="Loading ..."}if(!this.loadDialog){this.loadDialog=new Element("div",{tabIndex:0});this.loadDialog.className="modal-loading";this.loadDialog.setStyle({position:"absolute"})}this.loadDialog.update(d);document.body.appendChild(this.loadDialog);this.loadDialog.setStyle({top:"-1000px",left:"0px"});var c=function(){try{this.loadDialog.focus()}catch(a){}}.bind(this);jQuery(this.loadDialog).effect("pulsate",{times:150},"normal")},layoutScreen:function(){if(this.display){if(!this.coverScreen){this.coverScreen=$("modal-screen")}if(!this.coverScreen){this.coverScreen=new Element("div",{id:"modal-screen","class":"modal-screen"}).hide()}this.display.container.insert({before:this.coverScreen});var g=document.viewport.getDimensions();var f=document.viewport.getScrollOffsets();if(Prototype.Browser.IE&&ep.InternetExplorerVersion<7){g={height:document.body.clientHeight,width:document.body.clientWidth}}var h={height:document.documentElement.scrollHeight,width:document.documentElement.scrollWidth};h.height=h.height>g.height?h.height:g.height;h.width=h.width>g.width?h.width:g.width;this.coverScreen.setStyle({top:"0",left:"0px",height:h.height+"px",width:h.width+"px"});if(this.loadDialog){var e=this.loadDialog.getDimensions();this.loadDialog.setStyle({top:(f.top+g.height/2-e.height/2)+"px",left:(f.left+g.width/2-e.width/2)+"px"})}}},refresh:function(b){this.content=null;this.show()},handleCloseKeyPress:function(b){if(b.keyCode===Event.KEY_RETURN){this.hide()}else{if(b.keyCode===Event.KEY_TAB&&b.shiftKey){b.stop()}}},hide:function(){if(this.display){var c=function(){this.troublesomeElements.invoke("setStyle",{visibility:"visible"});if(this.childForms){for(var a=0;a<this.childForms.length;a++){this.childForms[0].reset();delete this.childForms[0]}}}.bind(this);jQuery(this.display.container).fadeOut("normal",c);if(Object.isFunction(this.onHide)){this.onHide()}this.coverScreen.dialog=this;var d=function(){if(this.trigger){this.trigger.focus()}var b=$$(".modal-dialog",".modal-loading",".modal-screen").invoke("remove");var a=this.troublesomeElements.length;while(a--){delete this.troublesomeElements[a]}a=b.length;while(a--){delete b[a]}b=this.troublesomeElements=this.display=this.coverScreen=this.content=null;if(Object.isFunction(this.onClientAfterHide)){this.onClientAfterHide()}}.bind(this);jQuery(this.coverScreen).fadeOut("normal",d);theForm=this.previousAspForm||null}}});(function(b){b.widget("ui.uidialog",{container:{},options:{container:"",dialogClass:"",controller:"",data:{},zIndex:0},onDialogOpen:function(){var a=this;if((typeof this.options.controller!=="undefined")&&this.options.controller!==""){ep.require(this.options.controller,function(c){b(a.options.container).trigger(a.options.controller+"_dialogOpen")})}var d=b(".ui-icon");if(d.length){d.addClass()}},onDialogClose:function(){ep.debug("uidialog: onDialogClose method");if((typeof this.options.controller!=="undefined")&&this.options.controller!==""){b(this.options.container).trigger(this.options.controller+"_dialogClose")}},_create:function(){var a=this;b(this.options.container).dialog({autoOpen:false,draggable:false,resizable:false,dialogClass:this.options.dialogClass,width:this.options.width,zIndex:this.options.zIndex});this.container=b(this.options.container);this.container.bind("dialogopen",function(f,e){a.onDialogOpen()});this.container.bind("dialogclose",function(f,e){a.onDialogClose();a.destroy()})},_init:function(){this.container.dialog("open")},destroy:function(){this.container.unbind("dialogopen");this.container.unbind("dialogclose");b.Widget.prototype.destroy.call(this)}});b(function(){b("[data-dialog]").live("click mouseenter",function(h){var g=this;var a=b(this).data("dialog");if(a!==null){if(h.type==="click"){if(a.isModal){b(this).epmodal(a)}else{if(a.isPopup){a.popupTarget=b(this);b(this).eppopup(a)}else{if(a.isHover){return true}else{b(this).uidialog(a)}}}}else{if(h.type==="mouseenter"){if(a.isHover){var e=setTimeout(function(){a.popupTarget=b(g);b(g).eppopup(a)},500);b(g).bind({mouseleave:function(){clearTimeout(e)}})}}}}h.preventDefault();return false});if(ep.clientData.showJsonModalOnLoad){ep.require("ep/widgets/epmodal.js",function(d){var a=jQuery.parseJSON(ep.clientData.showJsonModalOnLoad);b(document.forms[0]).epmodal(a)})}b("[data-dialog]").each(function(e){var f=this;var a=b(f).data("dialog");if(a.isAutoOpenPopup){setTimeout(function(){b(f).trigger("click")},1000)}})})})(jQuery);(function(b){b.widget("ui.epmodal",b.ui.uidialog,{loadDialogFx:null,loadDialog:null,triggerElement:null,options:{url:"",hideCloseButton:false},onDialogOpen:function(){var a=this;b.ui.uidialog.prototype.onDialogOpen.call(this);if(!this.options.hideCloseButton){this.container.parent().bind("keydown",function(i){var l=(i.keyCode?i.keyCode:i.which);if(b(i.target).hasClass("ui-dialog-titlebar-close")&&l===b.ui.keyCode.ENTER){a.container.dialog("close");return false}if(i.keyCode!==b.ui.keyCode.TAB){return}var j=b(":tabbable",this),h=j.filter(":first"),k=j.filter(":last");if(i.target===h[0]&&!i.shiftKey&&b(i.target).hasClass("ui-dialog-titlebar-close")){j[1].focus();return false}if(i.target===k[0]&&!i.shiftKey&&h.hasClass("ui-dialog-titlebar-close")){h[0].focus();return false}})}b(".ui-dialog-titlebar-close").attr("title",ep.messages.Close)},onDialogClose:function(){theForm=this.previousAspForm||null;b.ui.uidialog.prototype.onDialogClose.call(this);this.container.unbind("dialogopen");this.container.unbind("dialogclose");this.container.parent().unbind("keypress");this.container.empty();if(this.triggerElement){this.triggerElement.focus()}},_create:function(){this.triggerElement=this.element;if(!this.options.container.length){this.options.container="#modal"}if(this.options.zIndex<=0){this.options.zIndex=10003}this.options.dialogClass+=" epmodal";if(b(this.options.container).length<1){b(document.body).append('<div id="'+this.options.container.replace("#","")+'"></div>')}this.displayLoadDialog();b.ui.uidialog.prototype._create.call(this);if(this.container&&this.container.dialog){this.container.dialog("option","modal",true);this.container.dialog("option","width","auto");this.container.dialog("option","height","auto")}},_init:function(){var a=this;a.options.data.nobk="T";b.ajax({url:ep.utilities.buildAjaxRequestPath(a.options.url),data:a.options.data,success:function(f){var e=f.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(e){f=e[1]}if(!a.previousAspForm&&window.theForm){a.previousAspForm=theForm}b(a.options.container).html(f);a.childForms=b("#modal form");if(window.theForm&&a.childForms.length>0){theForm=a.childForms[0]}b(".ui-dialog-titlebar-close").hover(function(){b(a).removeClass("ui-state-hover")},function(){});jQuery(a.loadDialog).stop(true,true).fadeOut();b.ui.uidialog.prototype._init.call(a);b(a.options.container).height("auto");b(a.options.container).css("min-height","");if(a.options.hideCloseButton){b(".ui-dialog-titlebar-close").hide()}}})},destroy:function(){b.Widget.prototype.destroy.call(this)},loadDialogFocus:function(){try{this.loadDialog.focus()}catch(a){}},displayLoadDialog:function(d){if(!d){d=ep.messages.Loading}this.loadDialog=b("#modalLoadDialog");if(!this.loadDialog.length){this.loadDialog=b("<div id='modalLoadDialog'>").attr("tabIndex",0);this.loadDialog.className="modal-loading";this.loadDialog.css({position:"absolute"})}this.loadDialog.html(d);b("body").append(this.loadDialog);this.loadDialog.css({top:"-1000px",left:"0px"});this.loadDialogFocus();jQuery(this.loadDialog).effect("pulsate",{times:150},"normal");var a=b(window);if(this.loadDialog){this.loadDialog.css({top:(a.scrollTop()+a.height()/2-this.loadDialog.height()/2)+"px",left:(a.scrollLeft()+a.width()/2-this.loadDialog.width()/2)+"px"})}}})})(jQuery);(function(b){b.widget("ui.eppopup",b.ui.uidialog,{dialogTop:0,dialogLeft:0,arrowElement:{},options:{popupTarget:{},popupOffset:0,popupPosition:null,hideCloseButton:false,isShowVerticalPopups:false,message:null,closeAllOther:null,success:b.noop},_create:function(){ep.debug("eppopup : _create()");if(this.options.zIndex<=0){this.options.zIndex=10005}if(this.options.closeAllOther){b("."+this.options.closeAllOther).not(this.element).dialog("close")}this.triggerElement=this.element;if(b(this.options.container).length<1){b(document.body).append('<div id="'+this.options.container.replace("#","")+'"></div>')}b.ui.uidialog.prototype._create.call(this)},_init:function(){ep.debug("eppopup : _init()");if(this.options.isPopup&&this.container.dialog("isOpen")){this.container.dialog("close")}else{var a=this;if(this.options.url){b.ajax({url:ep.utilities.buildAjaxRequestPath(a.options.url),data:a.options.data,success:function(d){b(a.options.container).html(d);if(a.options.hideCloseButton){b(".ui-dialog-titlebar-close").hide()}if(a.options.isPopup){b(document.body).bind("click.popupClose",function(c){if(a.container.parent().has(c.target).length===0&&a.triggerElement.get(0)!==b(c.target).get(0)){a.container.dialog("close")}})}if(a.options.success){a.options.success()}if(a.isClosed){a.container.dialog("close")}else{b.ui.uidialog.prototype._init.call(a);a.displayDialog();if(a.container&&a.container.dialog){a.container.dialog("option","position",[a.dialogLeft,a.dialogTop])}}}});this.setHoverEvents()}else{if(this.options.message){b(this.options.container).html(this.options.message)}b.ui.uidialog.prototype._init.call(this);this.displayDialog();if(this.container&&this.container.dialog){this.container.dialog("option","position",[this.dialogLeft,this.dialogTop])}if(this.options.hideCloseButton){b(".ui-dialog-titlebar-close").hide()}this.setHoverEvents()}}b(this.options.container).height("auto");b(this.options.container).css("min-height","")},destroy:function(){if(this.options.isHover){this.triggerElement.unbind("mouseleave");this.container.parent().unbind("mouseenter");this.container.parent().unbind("mouseleave");if(this.options.hideCloseButton){b(".ui-dialog-titlebar-close").show()}}if(this.options.isPopup){b(document.body).unbind("click.popupClose")}b(this.arrowElement).remove();while(this.options.popupTarget.next().hasClass("eppopup-arrow-elem")){this.options.popupTarget.next().remove()}b.ui.uidialog.prototype.destroy.call(this)},setHoverEvents:function(){var a=this;if(this.options.isHover){b(this.triggerElement).bind({mouseleave:function(){var d=setTimeout(function(){a.isClosed=true;a.container.dialog("close")},150);b(a.container).parent().bind({mouseenter:function(){clearTimeout(d)},mouseleave:function(){d=setTimeout(function(){a.isClosed=true;a.container.dialog("close")},150)}});b(a.arrowElement).bind({mouseenter:function(){clearTimeout(d)},mouseleave:function(){d=setTimeout(function(){a.isClosed=true;a.container.dialog("close")},150)}})}})}},setPopupDisplay:function(){if(this.container&&this.container.dialog&&this.container.parents(".ep-dialog-main").length<1){var d=this.container.siblings(".ui-dialog-titlebar");d.addClass("ep-dialog-top-left");d.wrapInner('<div class="ep-dialog-top" />');d.wrapInner('<div class="ep-dialog-top-rt" />');this.container.wrap('<div class="ep-dialog-content" />');this.container.parents(".ep-dialog-content").wrap('<div class="ep-dialog-main-inner" />');this.container.parents(".ep-dialog-main-inner").wrap('<div class="ep-dialog-main" />');var a=this.container.parents(".ep-dialog-main");b('<div class="ep-dialog-bot-left"><div class="ep-dialog-bot-rt"><div class="ep-dialog-bottom"></div></div></div>').insertAfter(a)}},displayDialog:function(){var A=b(this.options.container).parent(),a=this.options.popupTarget.width(),B=this.options.popupTarget.height(),K=this.options.popupTarget.offset(),y=b(window).height(),F=b(window).width(),J={top:b(window).scrollTop(),left:b(window).scrollLeft()},H=a/2-10,I=B/2-5,v=22+H,G=11+I,x=38,z=K.left+a/2,L=K.top+B/2,D=L-A.height()/2-J.top,E,u,C,w="onTop";this.options.popupTarget.after("<div />");this.arrowElement=this.options.popupTarget.next();if(this.options.isShowVerticalPopups){if((L-G-A.height())>J.top){w="onTop"}else{w="onBottom"}}else{if((z+v+A.width())<J.left+F){w="onRight"}else{if((z-v-A.width())>J.left){w="onLeft"}else{if((L-G-A.height())>J.top){w="onTop"}else{if((L+G+A.height())<(J.top+y)){w="onBottom"}}}}}if(this.options.popupPosition){w=thePosition}if(w==="onRight"||w==="onLeft"){if(w==="onRight"){E=z+v+this.options.popupOffset-J.left;this.arrowElement.addClass("dialog-left-arrow");C=z+H+this.options.popupOffset-this.arrowElement.offsetParent().offset().left}else{if(w==="onLeft"){E=z-A.width()-v-this.options.popupOffset-J.left;this.arrowElement.addClass("dialog-rt-arrow");C=z-(H+this.arrowElement.width())-this.options.popupOffset-this.arrowElement.offsetParent().offset().left}}if(A.height()>y){D=J.top+(y/2)-(A.height()/2)}else{if((D+A.height())>(y+J.top)){D=y+J.top-A.height()}}if(D<0){D=0}if((D+A.height())<(L+x)){D=L+x-(A.height()/2)-J.top}else{if(D>(L-x)){D=L-x-J.top}else{if(L<J.top){D=L-J.top-x}}}u=(L-this.arrowElement.height()/2)-this.arrowElement.offsetParent().offset().top}else{if(!this.options.isShowVerticalPopups){if(L<(y/2+J.top)){w="onBottom"}else{w="onTop"}}if(w==="onTop"){D=L-A.height()-G-J.top;this.arrowElement.addClass("dialog-top-arrow border-p1");u=L-I-this.arrowElement.height()-this.arrowElement.offsetParent().offset().top}else{if(w==="onBottom"){D=L+G-J.top;this.arrowElement.addClass("dialog-bot-arrow");u=(L+I-(this.arrowElement.height()/2)-this.arrowElement.offsetParent().offset().top)}}E=z-A.width()/2-J.left;C=(z-this.arrowElement.width()/2)-this.arrowElement.offsetParent().offset().left;if(A.width()>F){E=(F/2+J.left)-A.width()/2}else{if((E+A.width())>(J.left+F)){E=(J.left+F)-A.width()}if(E>z-x){E=z-x-J.left}else{if((E+A.width())<(z+x)){E=z+x-A.width()-J.left}}}}this.arrowElement.css("top",u+"px");this.arrowElement.css("left",C+"px");this.arrowElement.css("display","block");this.arrowElement.css("visibility","visible");this.arrowElement.addClass("eppopup-arrow-elem");this.dialogTop=D;this.dialogLeft=E}})})(jQuery);if(!ep.dialog){ep.dialog={}}ep.dialog.PopupManager=function(){return{createDialog:function(){var n=document.body.appendChild(new Element("div"));n.className="ep-dialog border-p1";n.setStyle({position:"absolute",display:"none"});var l=new Element("div");l.className="ep-dialog-top-left";n.appendChild(l);l=new Element("div");l.className="ep-dialog-top-rt";n.childNodes[0].appendChild(l);l=new Element("div");l.className="ep-dialog-top";var i=n.childNodes[0].childNodes[0].appendChild(l);l=new Element("div");l.className="ep-dialog-main";n.appendChild(l);l=new Element("div");l.className="ep-dialog-main-inner";n.childNodes[1].appendChild(l);l=new Element("div");l.className="ep-dialog-content";var m=n.childNodes[1].childNodes[0].appendChild(l);l=new Element("div");l.className="ep-dialog-bot-left";n.appendChild(l);l=new Element("div");l.className="ep-dialog-bot-rt";n.childNodes[2].appendChild(l);l=new Element("div");l.className="ep-dialog-bottom";n.childNodes[2].childNodes[0].appendChild(l);var o=document.body.appendChild(new Element("div"));var k=null;if(navigator.appVersion.match(/MSIE 6/)!==null){var p=new Element("iframe");var j=new Element("iframe");p.setStyle({position:"absolute",zIndex:1});j.setStyle({position:"absolute",zIndex:1});k={frame1:p,frame2:j}}return{outerElement:n,innerElement:m,arrowElement:o,headerElement:i,ie6Fixer:k}},displayDialog:function(O,A,P,C,Z,D,J){document.fire("ep.dialog.PopupManager:dialogWillDisplay");var L=O.getDimensions();var X=O.viewportOffset();var I=document.viewport.getHeight();var S=document.viewport.getWidth();var W=document.viewport.getScrollOffsets();if(Prototype.Browser.IE&&ep.InternetExplorerVersion<8){X=O.getBoundingClientRect();I=document.body.clientHeight;S=document.body.clientWidth}var U=L.width/2-10;var V=L.height/2-5;var E=14+U;var T=16+V;var H=38;if(!Z){Z=0}A.arrowElement.setStyle({top:"-10000px",left:"0px",visibility:"hidden",display:"block"});A.outerElement.setStyle({top:"-10000px",left:"0px",visibility:"hidden",display:"block",width:P+"px"});var K=X.left+L.width/2+W.left;var Y=X.top+L.height/2+W.top;var Q=Y-A.outerElement.clientHeight/2;var R;var F;var M;var G="onTop";if((K+E+P)<W.left+S){G="onRight"}else{if((K-E-P)>W.left){G="onLeft"}else{if((Y-T-A.outerElement.clientHeight)>W.top){G="onTop"}else{if((Y+T+A.outerElement.clientHeight)<(W.top+I)){G="onBottom"}}}}if(D){G=D}if(G==="onRight"||G==="onLeft"){if(G==="onRight"){R=K+E+Z;A.arrowElement.className="dialog-left-arrow";M=K+U+Z}else{if(G==="onLeft"){R=K-P-E-Z;A.arrowElement.className="dialog-rt-arrow";M=K-(U+A.arrowElement.clientWidth)-Z}}if(A.outerElement.clientHeight>I){Q=W.top+(I/2)-(A.outerElement.clientHeight/2)}else{if(Q<W.top){Q=W.top}else{if((Q+A.outerElement.clientHeight)>(I+W.top)){Q=I+W.top-A.outerElement.clientHeight}}}if(Q<0){Q=0}if((Q+A.outerElement.clientHeight)<(Y+H)){Q=Y+H-A.outerElement.clientHeight}else{if(Q>(Y-H)){Q=Y-H}}F=Y-A.arrowElement.clientHeight/2}else{if(Y<(I/2+W.top)){G="onBottom"}else{G="onTop"}if(D!==null&&D!==undefined&&D.length>0){G=D}if(G==="onTop"){Q=Y-A.outerElement.clientHeight-T;A.arrowElement.className="dialog-top-arrow border-p1";F=Y-V-A.arrowElement.clientHeight}else{if(G==="onBottom"){Q=Y+T;A.arrowElement.className="dialog-bot-arrow";F=(Y+V)}}R=K-P/2;M=K-A.arrowElement.clientWidth/2;if(P>S){R=(S/2+W.left)-P/2}else{if(R<W.left){R=W.left}else{if((R+P)>(W.left+S)){R=(W.left+S)-P}}if(R>K-H){R=K-H}else{if((R+P)<(K+H)){R=K+H-P}}}if(D!==null&&D!==undefined&&D.length>0){if(D==="onBottom"){Q=X.top+L.height+W.top;R=X.left;if(J==="right"){R=(X.left+L.width)-P}}}}if(C){O.insert({after:A.outerElement});O.insert({after:A.arrowElement})}var B=A.outerElement.getOffsetParent();if(B.tagName!=="BODY"&&B.tagName!=="HTML"){var N=B.cumulativeOffset();Q=Q-N.top;F=F-N.top;R=R-N.left;M=M-N.left}A.arrowElement.setStyle({top:F+"px",left:M+"px",display:"block",visibility:"visible"});A.outerElement.setStyle({top:Q+"px",left:R+"px",display:"block",visibility:"visible"});if(A.ie6Fixer!==null){A.outerElement.parentNode.insertBefore(A.ie6Fixer.frame1,A.outerElement);A.outerElement.parentNode.insertBefore(A.ie6Fixer.frame2,A.outerElement);A.ie6Fixer.frame1.setStyle({top:Q+7,left:R+22,width:A.outerElement.clientWidth-44,height:A.outerElement.clientHeight-14,display:"block"});A.ie6Fixer.frame2.setStyle({top:Q+22,left:R+8,width:A.outerElement.clientWidth-15,height:A.outerElement.clientHeight-44,display:"block"})}document.fire("ep.dialog.PopupManager:dialogDisplayed")},hideDialog:function(b){if(!b){return}if(b.outerElement){b.outerElement.style.display="none";b.arrowElement.style.display="none"}if(b.ie6Fixer){if(b.ie6Fixer.frame1.parentNode){b.ie6Fixer.frame1.parentNode.removeChild(b.ie6Fixer.frame1)}if(b.ie6Fixer.frame2.parentNode){b.ie6Fixer.frame2.parentNode.removeChild(b.ie6Fixer.frame2)}}}}}();ep.dialog.HoverPopup=function(){var x=[];var u=null;var m=null;var p=null;var v=null;var q=null;var w=false;var s=null;function t(a){if(m!==null){clearTimeout(m);m=null}p=setTimeout(ep.dialog.HoverPopup.hideHover,(a||500))}function n(){if(p!==null){clearTimeout(p);p=null}}function r(){u=ep.dialog.PopupManager.createDialog();u.outerElement.observe("mouseover",n);u.outerElement.observe("mouseout",t);u.arrowElement.observe("mouseover",n);u.arrowElement.observe("mouseout",t);w=true}function o(b,c){if(!w){r()}var a=c||750;n();if(m!==null){clearTimeout(m);m=null}q=b.element();if(q.name==="iconImage"){q=q.offsetParent}m=setTimeout(ep.dialog.HoverPopup.showHover,a);return false}return{addHover:function(d,g,a,c,e,b){var f;if(Object.isElement(d)){f=d}else{f=$(d)}if(f!==null){s=o.bindAsEventListener(ep.dialog.HoverPopup,e);Event.observe(f,"mouseover",s);f.observe("mouseout",t);x.push({id:f.identify(),data:g,width:c,render:a,offset:b,mouseoverFunc:s})}},showHover:function(){m=null;var a;for(var b=0;b<x.length;b++){a=x[b];if(a.id===q.id){u.innerElement.innerHTML=a.render(a.data);break}}var c=q;if(a.data&&a.data.positionElement){c=$(a.data.positionElement)}ep.dialog.PopupManager.displayDialog((c||q),u,a.width,false,a.offset)},hideHover:function(a){ep.dialog.PopupManager.hideDialog(u);p=null;if(ep.dialog.FolderPopupObject){ep.dialog.FolderPopupObject.closeDialog()}},cancelHideHover:function(){n()},delayHide:function(a){t(a)},removeHover:function(b){if(!b){return}var a=-1;for(var d=0;d<x.length;d++){if(x[d].id===b.id){a=d;break}}if(a>=0){var c=x[d];if(c){Event.stopObserving(c,"mouseover",s);x.splice(d,1)}}}}}();ep.dialog.ToggledPopup=function(){var o=[];var w=null;var v=null;var n=false;var u=null;var m=null;var r=null;var s=null;function t(a){if(a.target!==v){n=true}}function p(b){u=b;var a=o[b.id];if(a){if(!w){w=ep.dialog.PopupManager.createDialog();document.observe("ep.dialog.PopupManager:dialogWillDisplay",ep.dialog.PopupManager.hideDialog.bind(null,w));v=new Element("a",{tabIndex:0});w.headerElement.appendChild(v);v.observe("click",ep.dialog.ToggledPopup.closeDialog);v.observe("keypress",function(c){if(c.keyCode===Event.KEY_RETURN){ep.dialog.ToggledPopup.closeDialog();c.stop()}});w.outerElement.observe("click",t)}b.addClassName("ep-dialog-toggle");b.removeClassName("color-s1").addClassName("color-p1");v.innerHTML='<span class="hidden">'+a.closeText+"</span>";if(r!==null&&s!==null){$(r).addClassName("hidden");s.appendChild(r);r=s=null}w.innerElement.innerHTML="";if(a.isAppendElement===true){r=a.data;s=a.data.parentNode;w.innerElement.appendChild(a.render(r));$(r).removeClassName("hidden")}else{w.innerElement.innerHTML=a.render(a.data)}ep.dialog.PopupManager.displayDialog(u,w,a.width,!a.focusSelector,a.offset,a.position,a.alignment);Event.observe(document.body,"click",ep.dialog.ToggledPopup.closeDialog);m=w.innerElement.down(a.focusSelector);if(m){m.tabIndex=0;m.focus()}}}function x(){var a=$$(".ep-dialog-toggle");if(a.length){a.each(function(b){b.removeClassName("ep-dialog-toggle");if(b.hasClassName("toggle")){b.removeClassName("color-p1").addClassName("color-s1")}})}}function q(b){var a=jQuery(b.target).closest("a")[0];x();if(u===a){ep.dialog.ToggledPopup.closeDialog(b)}else{Event.stop(b);p(a)}}return{addDialog:function(e,d,h,a,i,b,c,f,g){var j=$(e);if(j!==null){if(o[j.id]){j.stopObserving("click",q)}j.observe("click",q);j.tabIndex=0;o[j.id]={id:j.id,data:d,width:a,render:h||function(k){return k},closeText:i,focusSelector:b,isAppendElement:c,position:f,alignment:g}}},closeDialog:function(a){if(n){n=false}else{x();ep.dialog.PopupManager.hideDialog(w);Event.stopObserving(document.body,"click",ep.dialog.ToggledPopup.closeDialog);if(a){if(u===jQuery(a.target).closest("a")[0]){Event.stop(a)}}u=null}return false},showDialog:function(a){p(a)}}}();function __doLinkPostBack(P,x,N){if(x&&x.length>0){var I=getPostBackForm();var J=(P.length<1)?getPostBackPage(I,true):P;var K=getUpdatedFormAction(I,J);var y=unescape(x);var E=y.split("||");var A="";for(var z=0;z<E.length;z++){var H=E[z].split("~~");if(H.length>0){var D=H[0];var O=null;if(D.indexOf("hidden_")===0){var F=D.split("_");D=F[1];if(document.all&&!document.getElementById){O=document.all[H[1]]}else{O=jQuery("#"+H[1])[0]}}var M="hidden";var C=D;var e=D;var B=null;if(O){B=O.value}else{B=H[1]}var G=null;try{if(document.all&&!document.getElementById){G=document.all[D]}else{G=jQuery("#"+D)[0]}}catch(L){G=document.getElementById(D)}if((G===undefined)||(G==="")||(!G)){G=jQuery("<input/>").attr({type:M,id:C,name:e,value:B})[0];jQuery(I).append(G)}else{try{G.value=B;G.type=M;G.id=C;G.name=e}catch(i){A+=C+"="+B+"&"}}G=null}H=null}I.action=K;I.method="post";if(A!==""){K+="&"+A}if(((N!==undefined)&&(N!==""))||(N)){I.target=N}I.__EVENTTARGET.value="";I.__EVENTARGUMENT.value="";I.submit()}}function AddAnchorToAction(b){document.forms[0].action+="#"+b};function updateCheckboxGroupWithParent(j,l){var i=document.getElementById(l);if(i){var h=i.getElementsByTagName("input");for(var e=0;e<h.length;e++){var k=h[e];if(k.type==="checkbox"){k.checked=j}}}}function checkAll(f){for(var e=0;e<theForm.elements.length;e++){var d=theForm.elements[e];if(d.type==="checkbox"&&d.name.indexOf(f)>-1){d.checked=true}}}function uncheckAll(f){for(var e=0;e<theForm.elements.length;e++){var d=theForm.elements[e];if(d.type==="checkbox"&&(!f||d.name.indexOf(f)>-1)){d.checked=false}}}function setCheckboxesByName(h,g){var e=document.getElementsByName(h);if(e){for(var f=0;f<e.length;f++){e[f].checked=g}}}function ToggleVisibility(d){var c=getElementById(d);if(c){if(c.style.display!=="none"){c.style.display="none"}else{c.style.display=""}}}function ToggleDisplay(f){var e=getElementById(f);if(e){var d=e.style.display==="none"?"block":"none";e.style.display=d}}function ToggleDisplayRow(f){var e=getElementById(f);if(e){var d=e.style.display==="none"?"display:table-row;":"display:none;";e.style.cssText=d}}function openprintSearchHistory(i){var l=(screen.width-250);var k=(screen.height-250);var g=((screen.width-l)/2);var j=((screen.height-k)/2)-50;var h=window.open(i,"PrintHistory","toolbar=1,location=0,directories=0,status=0,menubar=1,scrollbars=yes,resizable=no,top="+j+",left="+g+",width="+l+",height="+k);h.focus()}function SelectChecked(h,f){var i=jQuery("#s_"+h);if(i.length){var j=jQuery("#e_"+h);if(!i.is(":checked")){if(j.length){j.attr("checked",false)}var g=jQuery("#f_"+h);if(g.length){g.attr("checked",false)}}else{if(f){if(j.length){j.attr("checked",true)}}}}}function ExplodeChecked(f){var d=jQuery("#e_"+f);if(d.length){if(d.is(":checked")){var e=jQuery("#s_"+f);if(e.length){e.attr("checked",true)}}}}function FocusChecked(f){var d=jQuery("#f_"+f);if(d.length){if(d.is(":checked")){var e=jQuery("#s_"+f);if(e.length){e.attr("checked",true)}}}}function ShowHideLimiters(f){var g=document.getElementsByTagName("tr");if(g){for(var e=0;e<g.length;e++){var h=g[e].attributes["class"];if(h){if(h.value==="display-toggled"||h.value==="hide"){g[e].style.display=f?"":"none"}else{if(h.value==="show"){g[e].style.display=!f?"":"none"}}}}}}function focusTextbox(f){if(typeof(searchID)!=="undefined"&&searchID){var d=document.getElementById(searchID);if(d){d.focus()}}else{for(var e=0;e<document.forms[0].length;e++){if(document.forms[0][e].type==="text"){document.forms[0][e].focus();return}}}}function focusOnMainContent(){if(window.screen.width<1024&&document.location.toString().indexOf("#")<0){window.scroll(0,100)}}function focusOnAnchorResultList(){jQuery("#resultListAnchor").scrollTo()}function selectCheckboxParentElement(s,o,v,y,u,x,p){if(!x){x=y}if(!p){p=u}var t=s.parentNode;while(t){var n=false;if(o.length>0&&t.tagName.toLowerCase()===o.toLowerCase()){n=true}else{if(v.length>0&&t.id.toLowerCase()===v.toLowerCase()){var z=elem.id.toLowerCase();var r=z.lastIndexOf(v.toLowerCase());n=r===z.length-v.length}}if(n){var q=t.className;var w=q===x||q===p;if(s.checked){t.className=w?x:y}else{t.className=w?p:u}break}else{t=t.parentNode}}}function updateFolderSelectAll(d){if(d.checked){aSelectedFolderItemCount++}else{aSelectedFolderItemCount--}selectCheckboxParentElement(d,"li","","folder-list-item-selected","folder-list-item");var c=getElementByClientId("toggleAllCheckboxes",document.getElementById("folder-content"));if(c){c.checked=aSelectedFolderItemCount===aTotalFolderItemCount;if(c.checked===true){ep.folder.selectDeselectAll(c)}}ep.displayutilities.updateItemList(d)}function isOneOrMoreChecked(k,j,h){var l=document.getElementsByTagName("input");var i=false;for(var g=0;g<l.length&&!i;g++){if(l[g].type==="checkbox"&&l[g].name.indexOf(k)>-1&&l[g].checked){i=true}}if(i){if(j){return confirm(j)}}else{if(h){alert(h)}}return i}function isAtLeastOneChecked(j,k){var l=false;var m=j.split(",");var o;for(var p=0;p<m.length&&!l;p++){o=document.getElementsByName(m[p]);if(o){for(var i=0;i<o.length&&!l;i++){l=o[i].checked}}}var n=document.getElementById(k);jQuery(".submit_emailprint").attr("disabled",!l);if(n){n.style.display=l?"none":"block"}return l}function IsAnyCheckbox(g,f){var e=1;var h=true;if(f){h=false}while(jQuery("#"+g+e).length){if(f){if(jQuery("#"+g+e).is(":checked")){h=true;break}}else{if(!jQuery("#"+g+e).is(":checked")){h=false;break}}e++}return h}function isAnyCheckBoxChecked(g){var h=false;var i=g.split(",");var j;for(var f=0;f<i.length&&!h;f++){j=document.getElementById(i[f]);if(j){h=j.checked}}return h}if(!ep.displayutilities){ep.displayutilities={}}ep.displayutilities.SelectedItems=[];ep.displayutilities.MaxBlockItems=25;ep.displayutilities.initSelected=function(e,d){var f=jQuery("#"+e);if(!f.length||f.val().length===0){return}if(!isNaN(d)){ep.displayutilities.MaxBlockItems=d}ep.displayutilities.SelectedItems=f.val().split(",")};ep.displayutilities.updateItemList=function(e){var d=ep.displayutilities.getItemValue(e);if(e.checked){if(ep.displayutilities.SelectedItems.indexOf(d)<0){ep.displayutilities.SelectedItems.push(d)}return}var f=ep.displayutilities.SelectedItems.indexOf(d);if(f>=0){ep.displayutilities.SelectedItems.splice(f,1)}};ep.displayutilities.getItemValue=function(c){var d="folderCheckValue"+c.name.substring(c.name.indexOf("_"));return jQuery("input[name='"+d+"']").first().val()};function onenterkeypress(c){var d=getElementById(c);if(d&&d.click){d.click();return false}else{if(debug_mode){alert("The wrong button ID '"+c+"' was assigned to submit the form!");return false}else{return false}}}function is_key(d,f){var e=d.which?d.which:d.keyCode;if(e===f){if(document.all){d.returnValue=false}return true}else{return false}}function is_enter_key(f){var d=13;var e=10;return is_key(f,d)||is_key(f,e)}function is_down_arrow_key(c){var d=40;return is_key(c,d)}function is_up_arrow_key(c){var d=38;return is_key(c,d)}function onkeypress_event(d,f){if(is_enter_key(d)){var e=d.srcElement;if(!e){e=d.target}if(e&&e.getAttribute("autocomplete")==="on"){return true}else{return onenterkeypress(f)}}return true};(function(b){b(function(){var k=function(d,c){c.addClass("active");if(i(d)){c.addClass("active-left")}};var i=function(c){if(c.length>0){return(c.offset().left<0)}};var m=function(c){c.removeClass("active-left").removeClass("active")};var n=b(".submenu-trigger"),j=n.find(".link"),a=n.find(".submenu .submenu-link"),l=n.find(".subnav-item > .submenu");n.hover(function(c){var d=b(this);if(c.type==="mouseleave"&&d.hasClass("active")){m(d);return}k(d.children(".submenu"),d)});j.focus(function(){var c=b(this),d=c.parent(".submenu-trigger"),e=d.children(".submenu");k(e,d);c.blur(function(){m(b(this).parent(".submenu-trigger"))})});a.focus(function(){var c=b(this),e=c.parents(".submenu-trigger"),d=e.children(".submenu");k(d,e);c.blur(function(){m(b(this).parents(".submenu-trigger"))})});l.hover(function(c){var d=b(this),e=d,f=e.children(".submenu");if(c.type==="mouseleave"&&d.hasClass("active")){m(d);return}k(f,e)})})})(jQuery);function openTip(d){var c=window.open(d,"searchtip","status=no,width=550,height=450,resizable=yes,scrollbars=yes");c.focus()}function openWideTip(e,f){if(f){e+="#"+f}var d=window.open(e,"searchtip","status=no,width=800,height=600,resizable=yes,scrollbars=yes");d.focus()}function openListItem(c){var d=window.open(c,"LinkListItem","top=10,left=200,width=750,height=450,status=1,menubar=1,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=1");d.focus()}function OpenIlsLink(g,h,i){if(i.length===0){i=""}if(h.length===0){h=""}ep.require("ep/common/common.js");var j=ep.buildHostURL()+"&"+g;var f=window.open(j,h,i);f.focus();if(document.all&&window.event){window.event.returnValue=false}return(false)}function newWin(h,e,g){if(g.length===0){g=""}if(e.length===0){e=""}var f=window.open(h,e,g);f.focus();if(document.all&&window.event){window.event.returnValue=true}return(true)}function imageQuickView(d){var c=window.open(d,"ImageQuickView","status=0,menubar=1,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0");c.focus();if(document.all&&window.event){window.event.returnValue=false}return(false)}function createNotePopup(f){var h=/msie 6/.test(navigator.userAgent.toLowerCase());var j=/msie 7/.test(navigator.userAgent.toLowerCase());var g="width=415";if(h||j){g="width=435"}var i=window.open(f,"CreateNote","status=0,menubar=0,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0,height=505,"+g);i.focus()}function OpenDictionary(d){var c=window.open(d,"Dictionary","top=40,left=200,width=590,height=400,status=1,menubar=0,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0");c.focus();if(document.all&&window.event){window.event.returnValue=false}}function SubmitSearchToParent(d){var c=window.opener;c.__doLinkPostBack("","target~~popup||args~~"+d,"");window.close()}function OpenInset(d){var c=window.open("","Inset","top=50,left=50,width=850,height=500,status=0,menubar=0,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0");c.location=d;c.focus();if(document.all&&window.event){window.event.returnValue=false}return(false)}function PopUpHealthology(j){var l=732;var g=604;var k=(screen.width-l)/2;var h=(screen.height-g)/2;var i=window.open(j,"healthology","top="+h+",left="+k+",width="+l+",height="+g+",status=0,menubar=0,scrollbars=0,titlebar=0,resizable=0,location=0,toolbar=0,channelmode=0,directories=0,fullscreen=0");i.focus();if(document.all&&window.event){window.event.returnValue=false}}function PopUpAnimation(k,i,l){var o=i||"240";var p=l||"320";var m=(screen.width-p)/2;var j=(screen.height-o)/2;var n=window.open("","animation","top="+j+",left="+m+",width="+p+",height="+o+",status=0,menubar=0,scrollbars=0,titlebar=0,resizable=0,location=0,toolbar=0,channelmode=0,directories=0,fullscreen=0");n.document.open();n.document.write("<html>\n<head>\n");n.document.write('<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">\n');n.document.write("<title>Flash Animation</title>\n</head>\n");n.document.write('<body bgcolor="#000000" onload="preload();">\n');n.document.write('<div id="message" style="display:block;position:absolute;left:0;top:'+o/2+";width:"+p+";height:"+o/2+';font-family:Verdana,Arial,Sans-Serif;font-size:14pt;font-weight:bold;text-align:center;background-color:#000000;color:#ffffff;">Loading... Please wait!</div>\n');n.document.write('<div id="wrapper" style="display:none;position:absolute;left:0;top:0;width:'+p+";height:"+o+';background-color:#000000;">\n');if(navigator.appName.toLowerCase().indexOf("explorer")!==-1){n.document.write('<object id="animation" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" width="'+p+'" height="'+o+'">\n');n.document.write('<param name="Movie" value="'+k+'"/>\n')}else{n.document.write('<object id="animation" type="application/x-shockwave-flash" data="'+k+'" width="'+p+'" height="'+o+'">\n')}n.document.write('<param name="BgGolor" value="#000000"/>\n');n.document.write('<param name="AutoPlay" value="true"/>\n');n.document.write('<param name="Loop" value="false"/>\n');n.document.write('<param name="Quality" value="High"/>\n');n.document.write('<param name="Menu" value="false"/>\n');n.document.write('<param name="WMode" value="Opaque"/>\n');n.document.write('<param name="Scale" value="ShowAll"/>\n');n.document.write('<div id="download" style="display:block;position:absolute;left:0;top:'+o/2+";width:"+p+";height:"+o/2+';text-align:center;color:#ffffff;">\n');n.document.write('<a href="http://www.adobe.com/go/getflashplayer" title="Download Flash Player!" target="_blank"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" border="0"/></a></div>\n');n.document.write("</object>\n");n.document.write("</div>\n");n.document.write('<script language="javascript" type="text/javascript">function preload(){\n');n.document.write('document.getElementById("wrapper").style.display="block";\n');n.document.write('document.getElementById("message").style.display="none";\n');n.document.write("}<\/script>\n");n.document.write("</body>\n</html>");n.document.close();n.focus();if(document.all&&window.event){window.event.returnValue=false}}function PopUpFlashVideo(c){var d=ep.utilities.getBaseRequestPath();if(d!==null){window.open(d+c,"flvplayer","width=420,height=360")}}function getControls(b){return[document.forms[0][document.forms[0]["text_"+b].value],document.forms[0][document.forms[0]["hidden_"+b].value],document.getElementById(document.forms[0]["label_"+b].value.replace(/\$/g,"_")),document.forms[0][document.forms[0]["button_"+b].value]]}function openPreSelWindow(f,h,j){var i=getControls(j);var g=i[0].value;if(h){newWin("popup-index?sid="+f+"&hid="+h+"&vid=&id="+j+"&term="+g,"indexlist","top=90,left=300,width=450,height=545,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no")}else{newWin("popup-index?sid="+f+"&vid=&id="+j+"&term="+g,"indexlist","top=90,left=300,width=450,height=545,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no")}}function setPreSelTerm(f,e){window.focus();var d=getControls(e);d[0].value="";d[0].style.display="none";d[1].value=f;d[2].style.display="none";d[2].innerHTML=f;d[2].style.display="";d[3].style.display=""}function resetPreSelTerm(d){var c=getControls(d);c[1].value="";c[2].style.display="none";c[3].style.display="none";c[0].style.display=""}function openOLRTestWindow(h,k,i,l,j,g){if(i){newWin("olrtests?sid="+h+"&vid="+k+"&hid="+i+"&db="+l+"&an="+j+"&md="+g,"Tests","top=50,left=50,width=850,height=500,status=0,menubar=0,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0")}else{newWin("olrtests?sid="+h+"&vid="+k+"&db="+l+"&an="+j+"&md="+g,"Tests","top=50,left=50,width=850,height=500,status=0,menubar=0,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0")}}function OpenPDF(c){var d=window.open(c,"_pdf","top=40,left=100,width=750,height=800,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes");d.focus();return false}function showMessageBox(i){var m=getElementById("messageBox");if(m){var j=getElementByClientId("lblMessage",m);if(j&&i){j.innerHTML=i}m.style.width=document.body.offsetWidth.toString()+"px";m.style.height=document.body.offsetHeight.toString()+"px";var n=document.getElementById("messageContents");var l=document.getElementById("coverScreen");var o=(document.body.offsetHeight/2-n.offsetHeight/2)+"px";var p=(document.body.offsetWidth/2-n.offsetWidth/2)+"px";l.style.left=p;n.style.left=p;l.style.top=o;n.style.top=o;m.style.visibility="visible";l.style.height=n.offsetHeight.toString()+"px";l.style.width=n.offsetWidth.toString()+"px";l.style.visibility="visible";var k=getElementByClientId("btnSubmit",m);window.scrollTo(o,p);if(k){k.focus()}}}function DisplayDynamicWindow(y,A,B,p,v,r,x){var z=getElementById(y);var q;var w,s;if(x){jQuery(document.body).append(z)}if(p){q=getElementById(p)}else{q=getElementById("coverScreen")}if(A==="hidden"){z.style.display="none";ep.ie6SelectFix(true)}else{if(A==="visible"){z.style.display="block";ep.ie6SelectFix();if(r){var t=jQuery(r).offset();s=t.top-z.offsetHeight/2;w=t.left+r.offsetWidth}else{s=200;w=Math.round((document.body.offsetWidth*0.5)-(z.offsetWidth*0.5))}z.style.left=w+"px";z.style.top=s+"px";q.style.top=s+"px";q.style.left=w+"px";q.style.height=z.offsetHeight.toString()+"px";q.style.width=z.offsetWidth.toString()+"px"}}z.style.visibility=A;q.style.visibility=A;var o;if(v){o=getElementById(v);if(o){o.innerHTML='<table id="messageBox2" class="popupContainer"><tr><td></td></tr></table>';var u=getElementById("messageBox2");u.style.width=document.body.offsetWidth.toString()+"px";u.style.height=document.body.offsetHeight.toString()+"px";u.style.visibility=A}}stopCurrentEvent(B)}function showImageBox(m,o){var r=getElementById("imageBox");if(r){ep.ie6SelectFix();var q=getElementByClientId("lblTitle",r);if(q&&m){q.innerHTML=m}var u=getElementByClientId("DisplayedLargeImage",r);if(u&&o){u.src=o}r.style.width=document.body.offsetWidth.toString()+"px";r.style.height=document.body.offsetHeight.toString()+"px";var s=document.getElementById("messageContents");var v=document.getElementById("coverScreen");var t=(document.body.offsetHeight/2-s.offsetHeight/2)+"px";var l=(document.body.offsetWidth/2-s.offsetWidth/2)+"px";var n;if(self.pageYOffset){n=self.pageYOffset}else{if(document.documentElement&&document.documentElement.scrollTop){n=document.documentElement.scrollTop}else{if(document.body){n=document.body.scrollTop}}}n=n+10;v.style.left="60px";s.style.left="60px";v.style.top=n+"px";s.style.top=n+"px";r.style.visibility="visible";v.style.height=s.offsetHeight.toString()+"px";v.style.width=s.offsetWidth.toString()+"px";v.style.visibility="visible";var p=getElementByClientId("btnSubmit",r);if(p){p.focus()}}}function closeImageBox(){var c=getElementById("imageBox");if(c){c.style.visibility="hidden"}ep.ie6SelectFix(true);var d=document.getElementById("coverScreen");if(d){d.style.visibility="hidden"}}function findDynamicPopupSize(d){d.style.left="-100%";d.style.display="block";var e=d.clientWidth;var f=d.clientHeight;d.style.display="none";return[e,f]}function findPos(b){return jQuery(b).offset()}var VerticalPosition={AlignTop:0,AlignBottom:1,AlignCenter:2};var HorizontalPosition={Left:0,Right:1};function PopupPosition(){this.hAlign=HorizontalPosition.Left;this.vAlign=VerticalPosition.AlignCenter;this.hPadding=15;this.vPadding=0}function PopupController(){this.position=new PopupPosition();this.coverScreen=true}PopupController.prototype={clearContent:function(d){var c=document.getElementById(d+"_t");if(c){c.innerHTML=""}},showPopup:function(theControlClientID,theReferenceElementID){ep.debug("popupwin : showPopup()");var aContainer=document.getElementById(eval(theControlClientID+"_p"));var aTarget=document.getElementById(eval(theControlClientID+"_t"));if(!aContainer||!aTarget){return}this.clearContent(theControlClientID);aTarget.innerHTML=this.getContent();this.positionPopup(aContainer,theReferenceElementID);if(this.coverScreen&&navigator.userAgent.toLowerCase().indexOf("msie 6")>-1){var aIFrame=document.getElementById(theControlClientID+"_iframe");if(!aIFrame){aIFrame=document.createElement("iframe");aIFrame.id=theControlClientID+"_iframe"}aIFrame.style.position="absolute";aIFrame.style.top=aContainer.style.top;aIFrame.style.left=aContainer.style.left;aIFrame.style.width=aContainer.clientWidth+"px";aIFrame.style.height=aContainer.clientHeight+"px";aContainer.style.zIndex="1";aContainer.parentNode.appendChild(aIFrame)}aContainer.style.display="block";jQuery(document).trigger("popuplinkclicked",[theReferenceElementID,theControlClientID])},getContent:function(){},positionPopup:function(i,f){var g=document.getElementById(f);var j=findPos(document.getElementById(f));var h=findDynamicPopupSize(i);switch(this.position.hAlign){case HorizontalPosition.Left:i.style.left=(j.left-h[0]-this.position.hPadding).toString()+"px";break;case HorizontalPosition.Right:i.style.left=(j.left+g.scrollWidth+this.position.hPadding).toString()+"px";break}switch(this.position.vAlign){case VerticalPosition.AlignTop:i.style.top=j.top.toString()+"px";break;case VerticalPosition.AlignBottom:i.style.top=(j.top-h[1]+g.scrollHeight).toString()+"px";break;case VerticalPosition.AlignCenter:i.style.top=(j.top+g.scrollHeight/2-h[1]/2).toString()+"px";break}}};function closeDynamicPopup(theClientID){var aContainer=document.getElementById(eval(theClientID+"_p"));if(aContainer){aContainer.style.display="none"}var aIFrame=document.getElementById(theClientID+"_iframe");if(aIFrame){aIFrame.parentNode.removeChild(aIFrame)}}function showShDetails(e,f){var d=new PopupController();d.getContent=function(){return document.getElementById("lastRun_"+f).innerHTML};if(ep.isBodyRTL()){d.position.hAlign=HorizontalPosition.Right}d.showPopup(e,"lnkDetails_"+f)}function OpenPopup(e,l,o,k){var m=window.open("",l,(k?k:"height=540px,width=555px,resizable=no,scrollbars=no,toolbar=no,location=no,directories=no,directories=no,menubar=no,copyhistory=no"));if(m){var r=null;try{var q=new RegExp("^(?:\\w+://[\\w\\./]+(?:\\:\\d+)?/)?([\\w\\.]+)(?:\\?.+)?$");var p=e.replace(q,"$1");if(m&&m.location&&(m.location.toString()!==""||m.location.toString()==="about:blank")){r=m.location.toString().replace(q,"$1")}if(o||m.location.toString()==="about:blank"||!r||r!==p){m.location=e}if(navigator.appVersion.indexOf("Mac")!==-1){m.location.href=e}}catch(n){}m.focus()}}function removeBlockerIFrame(e){ep.ie6SelectFix(true);var f=e.id+"_iframe";var d=document.getElementById(f);if(d){d.parentNode.removeChild(d)}}function addBlockerIframe(j){ep.ie6SelectFix();var h=j.id+"_iframe";var i=jQuery("#"+h)[0];if(!i){i=document.createElement("iframe");i.id=h;i.title="BlockerFrame"}var g=findPos(j);i.style.position="absolute";i.style.left=g.left.toString()+"px";i.style.top=g.top.toString()+"px";i.style.width=j.clientWidth+"px";i.style.height=j.clientHeight+"px";try{document.body.removeChild(j);j.style.zIndex="1";document.body.appendChild(i);i.appendChild(j)}catch(f){}}var aActiveFolderDropDown;function toggleFolderDropdown(p,k){var q=document.getElementById(k);var m=document.getElementById(p);var l=m.parentNode;var r=jQuery(l).position();var n=r.left;var o=r.top+l.offsetHeight;q.style.left=n.toString()+"px";q.style.top=o.toString()+"px";var j=navigator.appVersion.match(/MSIE 6/);if(q.style.display==="none"){q.style.display="block";if(q.offsetHeight>q.style.maxHeight){q.style.overflow="scroll"}if(aActiveFolderDropDown){aActiveFolderDropDown.style.display="none";if(j){removeBlockerIFrame(aActiveFolderDropDown)}}aActiveFolderDropDown=q;if(j){addBlockerIframe(q)}}else{q.style.display="none";aActiveFolderDropDown=null;if(j){removeBlockerIFrame(q)}}}function folderCreateParentSelect(h,j){var g=document.getElementById("folderParentValue");g.value=h;var f=document.getElementById("folderParentShowLink");f.innerHTML=unescape(j);var i=document.getElementById("folderParentSelect");i.style.display="none";if(navigator.appVersion.match(/MSIE 6.0/)){removeBlockerIFrame(i)}}function showQuickViewHint(g,e){var h=jQuery(g).position();var f=document.getElementById(e);if(f){jQuery(f).show();f.style.left=(h[0]-f.offsetWidth+g.offsetWidth)+"px";f.style.top=(h[1]-f.offsetHeight-5)+"px"}return false}function closeQuickViewHint(c){var d=document.getElementById(c);if(d){jQuery(d).hide()}return false}function showSmartTextViewHint(g,e){var h=jQuery(g).position();var f=document.getElementById(e);if(f){f.style.left=(h.left+g.offsetWidth+5)+"px";f.style.top=(h.top-g.offsetHeight)+"px";jQuery(f).show()}return false}function closeSmartTextViewHint(c){var d=document.getElementById(c);if(d){jQuery(d).hide()}return false}ep.updateVisualSearchLimiters=function(d){var c=d.target;ep.syncCheckboxState(c,document.forms[0]);jQuery.ajax({type:"post",url:c.action,data:{isAsyncModalPost:"true"},success:search});this.dialog.hide();d.preventDefault()};ep.syncModalCheckboxes=function(){if(this.href.match(/&resetForm=true/)){this.href=this.href.replace(/&resetForm=true/,"");this.content=null}else{if(this.childForms&&this.childForms.length>0){ep.syncCheckboxState(document.forms[0],this.childForms[0])}}};ep.addModalRedirectParameter=function(){if(this){var c=document.forms[0];var d=document.createElement("input");d.type="hidden";d.name="redirectUrl";d.value=c.action;this.appendChild(d)}};ep.clearModalContent=function(){if(this){this.content=null}};ep.ResetModalDialog=function(c,d){c.href=c.href+"&"+d;c.refresh();return false};ep.syncCheckboxState=function(j,h){if(!j||!h){return}var i=j.getElementsByTagName("input");for(var f=0;f<i.length;f++){if(i[f].type.toLowerCase()==="checkbox"){var g=h[i[f].name];if(g&&g.type.toLowerCase()==="checkbox"){g.checked=i[f].checked}}}jQuery(h).trigger("ep_syncCheckboxState_complete")};var EPDropDownBlocker=function(){_blockerFrame=null;return{AddBlocker:function(b){if(navigator.appVersion.match(/MSIE 6/)){if(!_blockerFrame){_blockerFrame=document.createElement("iframe");_blockerFrame.style.position="absolute"}if(b.parentNode){b.parentNode.insertBefore(_blockerFrame,b);_blockerFrame.style.width=b.clientWidth;_blockerFrame.style.height=b.clientHeight;_blockerFrame.style.left=b.offsetLeft+"px";_blockerFrame.style.top=b.offsetTop+"px";if(b.style.zIndex<2){b.style.zIndex=2}_blockerFrame.style.zIndex=b.style.zIndex-1}}},RemoveBlocker:function(){if(_blockerFrame&&_blockerFrame.parentNode){_blockerFrame.parentNode.removeChild(_blockerFrame)}}}}();var _imageTimeout;function logDataTransaction(h,g){var e=jQuery("#"+h).closest("form")[0].action.toString();e=e.replace(/(\/*)[\w\d]*?(\?)/,"$1logasync$2");var f="Mode=HoverView&ShortDB="+g.DB+"&AN="+g.UITerm+"&MID="+g.MID+"&IssnIsbn="+g.IssnIsbn+"&PubType="+g.PubType+"&SrcTitle="+g.JnBookTitle+"&Format=Image";jQuery.ajax({type:"post",url:e,data:f})}function showBiggerImage(u,z){var y=document.getElementById("relatedImagePopup");if(!y){y=document.createElement("span")}var r=y.getElementsByTagName("img")[0];if(!r){r=document.createElement("img");y.appendChild(r)}r.src=u;var B=jQuery(".thumbnail").attr("id");var s=ep.clientData.hoverPreviewImageJsonData[z];if(s){logDataTransaction(B,s)}if(!r.complete&&!r.width&&!r.naturalWidth){_imageTimeout=setTimeout('showBiggerImage("'+u+'","'+z+'")',250);return}y.id="relatedInfoPopup";y.style.position="absolute";y.style.left="-5000px";y.className="related-info-shadow";r.className="related-info-image";document.getElementsByTagName("body")[0].appendChild(y);var w=r.width;var D=800;var C=10;var x=10;var A=D;var E=-1;var t=-1;var v=-1;var F=document.getElementById("resultListInnerDiv");if(F){E=F.offsetWidth;A=E-C;t=F.offsetLeft;v=t+E-1}if(A<x||A>D){A=D}if(w>A){r.style.maxWidth=""+A+"px";r.width=A;w=A}y.style.top=(jQuery(window).scrollTop()+80).toString()+"px";var q=(document.body.clientWidth/2)-(w/2);if((t>0)&&(q+w>v)){q=v-w;if(q<0){q=0}}y.style.left=q.toString()+"px";EPDropDownBlocker.AddBlocker(y)}function hideBiggerImage(){clearTimeout(_imageTimeout);var b=jQuery("#relatedInfoPopup");if(b.length){b.remove()}EPDropDownBlocker.RemoveBlocker()}function addThisClick(g){var h=document.getElementById(g);if(h&&ep.clientData.addThis){var e=ep.clientData.addThis.bookmarkUrl+"&url="+encodeURIComponent(h.value)+"&title="+encodeURIComponent(document.title);var f=window.open(e,"_blank","scrollbars=yes,menubar=no,width=620,height=520,resizable=yes,toolbar=no,location=no,status=no,screenX=200,screenY=100,left=200,top=100");f.focus()}};if(!ep.utilities){ep.utilities={version:1}}ep.utilities.isNumeric=function(b){return(b-0)===b&&b.length>0};ep.utilities.numOrDefault=function(d,c){return ep.utilities.isNumeric(d)?d:(c||0)};ep.utilities.getAction=function(){return document.forms[0].action};ep.utilities.replaceEPCommand=function(l){var g="";var h=ep.utilities.getBaseRequestPath();if(h&&l!==null&&l.length!==0){var i=document.getElementById("aspnetForm");var k=i?i.action:window.location.href;var j=k.indexOf("?");g=h+l+(j>-1?k.substr(j):"")}return g};ep.utilities.getCommand=function(){var f;var h;var g;var i;var j;f=ep.utilities.getAction();h=f.indexOf("?");g=f.substring(0,h);i=g.lastIndexOf("/");j=g.substring(i+1);return j};ep.utilities.selectSingleNode=function(e,f){if(e===null||e.length===0){return null}if(f===null||f.length===0){return null}try{if(Prototype.Browser.IE){return e.selectSingleNode(f)}else{try{return ep.utilities.getSingleNode(e,f)}catch(g){return e.selectSingNode(f)}}}catch(h){return ep.utilities.getSingleNode(e,f)}};ep.utilities.getSingleNode=function(h,i){var j=new XPathEvaluator();var g=j.createNSResolver(h.ownerDocument===null?h.documentElement:h.ownerDocument.documentElement);var f=j.evaluate(i,h,g,XPathResult.FIRST_ORDERED_NODE_TYPE,null);return f.singleNodeValue};ep.utilities.getXmlElementValue=function(b){if(b.textContent!==undefined){return b.textContent}if(b.text!==undefined){return b.text}return null};ep.utilities.getBaseRequestPath=function(){var b;return function(){if(!b){var g=document.getElementById("RelRequestPath");if(g||ep.relativeRequestPath){var i=window.location.href;var j=new RegExp("(^.*)"+(ep.relativeRequestPath||g.value)+"\\?");var h=j.exec(i);if(h!==null&&h.length>1){b=h[1]}if(!b){var a=/^\w+:\/\/[^\/]+\/[^\/]+\//.exec(window.location.href);if(a&&a.length>1){b=a[0]}}if(b&&!/\/$/.test(b)){b=b+"/"}}}return b}}();ep.utilities.buildAjaxRequestPath=function(j,l){var k=document.getElementById("__sid");var g=document.getElementById("__vid");j=j.replace(/^\//,"");var h=ep.utilities.getBaseRequestPath()+j;if(l&&l.Db&&l.Term&&l.Tag){var i=l.Db+"_"+l.Term+"_"+l.Tag;h=h+"/"+ep.utilities.encodeRecordkey(i)}if(k&&g){h+="?sid="+k.value+"&vid="+g.value}else{if(ep.sid&&ep.vid){h+="?sid="+ep.sid+"&vid="+ep.vid}}return h};ep.utilities.encodeRecordkey=function(b){return encodeURIComponent(b).replace("%","[Per]")};ep.utilities.isEmptyObj=function(d){for(var c in d){if(d.hasOwnProperty(c)){return false}}return true};ep.utilities.formatNumber=function(c){c+="";x=c.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var d=/(\d+)(\d{3})/;while(d.test(x1)){x1=x1.replace(d,"$1,$2")}return x1+x2};Number.prototype.px=function(){return parseInt(this,10)+"px"};Number.isNumeric=function(b){return !isNaN(parseFloat(b))&&isFinite(b)};Number.numOrDefault=function(c,d){return ep.utilities.isNumeric(c)?c:(d||0)};(function(k){var l="folderLargeOn.gif";var m="folderLargeOff.gif";var n,i;if(!ep.folder){ep.folder={}}ep.folder.removeCurrentFolderItem=function(a,d,f,e,b){ep.debug("ep/updatefolder.js -> removeCurrentFolderItem");var g=ep.utilities.replaceEPCommand("removeinternalfolderitem");var c=k.ajax({url:g,type:"POST",data:{DB:a,UITag:d,UITerm:f,Title:e}}).done(function(s,h,t){ep.folder.updateCitationPage()})};ep.folder.updateCitationPage=function(){ep.debug("ep/updatefolder.js -> updateCitationPage");var a=ep.utilities.getCommand();if(a!=="detail"&&a!=="removeinternalfolderitem"&&a!=="citation"){return}location.replace(ep.utilities.getAction())};ep.folder.removeFolderItem=function(a,d,f,e,b){ep.debug("ep/updatefolder.js -> removeFolderItem");var g=ep.utilities.replaceEPCommand("removeinternalfolderitem");var c=k.ajax({url:g,type:"POST",data:{DB:a,UITag:d,UITerm:f,Title:e}}).done(ep.folder.addRemoveItemComplete);ep.folder.updateResultList(a,d,f,e,b)};ep.folder.updateResultList=function(v,y,z,g,c){ep.debug("ep/updatefolder.js -> updateResultList");var b=ep.utilities.getCommand();if(b!=="results"&&b!=="resultsadvanced"){return}var h=1;var x=ep.folder.getAddValIndexElem(h);while(x.length&&h<c){var a=k.parseJSON(x.val());var d=a.db;var e=a.uiTag;var w=a.uiTerm;var f=a.title;if(v===d&&y===e&&z===w&&g){ep.folder.toggleAddToFolderIcon(h,false);break}h++;x=ep.folder.getAddValIndexElem(h)}};ep.folder.getAddValIndexElem=function(a){ep.debug("ep/updatefolder.js -> getAddValIndexElem");a=parseInt(a,10);if(!Number.isNumeric(a)){return null}return k("#addVal_"+a)||document.forms[0]["addVal_"+a]};ep.folder.toggleFolderItem=function(C,E,F,b){ep.debug("ep/updatefolder.js -> toggleFolderItem");var h="";var G="";var d="";var H="";var K="";var J=false;var I="";var f="";var a="";var g="";var c=false;var L=true;if(b!==undefined&&b===false){L=false}if(C!==null&&C!==""){var B=k("#addVal_"+C);if(B===null){J=true;K=C}else{var D=B.val().replace(/\n/g,"");var e=k.parseJSON(D);h=e.db;G=e.uiTag;d=e.uiTerm;H=e.title;K=e.resultID;I=e.doid;f=e.segid;a=e.ebookFormat;g=e.abookFormat;c=e.companyFormat}}else{if(F===null){throw"Invalid request.  theItemID and theJsonString cannot both be null"}h=F.db?F.db:F.DB;G=F.uiTag?F.uiTag:F.UITag;d=F.uiTerm?F.uiTerm:F.UITerm;H=F.title?F.title:F.Title;K=F.resultID?F.resultID:F.ResultID;a=F.aEbook?F.aEbook:false;g=F.aAbook?F.aAbook:false;if(F.aCompany){c=F.aCompany}else{if(F.ContentType){c=F.ContentType==="Company Information"?true:false}}}if(C!==null){ep.folder.toggleAddToFolderIcon(C,E)}ep.folder.addRemoveFolderItemRequest(h,G,d,I,f,K,H,J,E,L,a,g,c)};ep.folder.addRemoveFolderItemRequest=function(e,B,C,g,y,z,h,b,A,d,x,a,D){ep.debug("ep/updatefolder.js -> addRemoveFolderItemRequest");var c=ep.utilities.replaceEPCommand("addremovefolderitem");var f=k.ajax({url:c,type:"POST",data:{DB:e,UITag:B,UITerm:C,DOID:g,SegID:y,ResultID:z,Title:h,IsExternalItem:b,AddToFolder:A,RenderFolderControl:d,EbookFormat:x,AbookFormat:a,CompanyFormat:D},dataType:"xml"}).done(ep.folder.addRemoveItemComplete)};ep.folder.toggleAddToFolderIcon=function(b,d){ep.debug("ep/updatefolder.js -> toggleAddToFolderIcon");var f=k("#add_"+b);var c=k("#added_"+b);var e=k("#lnkAddToFolderImage"),a=k("#lnkAddToFolderImageEmpty");if(d==="true"||d===true){if(f&&c){f.hide();c.show()}if(e&&a){a.hide();e.show()}}else{if(f&&c){c.hide();f.show()}if(e&&a){e.hide();a.show()}}};ep.folder.addRemoveItemComplete=function(e){ep.debug("ep/updatefolder.js -> addRemoveItemComplete");var b=e;if(b===null){return false}var a=ep.utilities.selectSingleNode(b,"EPResponse/ControlHtml");var c=a!==null?ep.utilities.getXmlElementValue(a):null;if(c!==null){ep.folder.updateFolderItemsControl(c)}var f=ep.utilities.selectSingleNode(b,"EPResponse/NumberOfFolderItems");var d=ep.utilities.getXmlElementValue(f);if(d!==null){lngFolderCount=d;ep.folder.updateToolbarFolderControl()}};ep.folder.updateFolderItemsControl=function(a){ep.debug("ep/updatefolder.js -> updateFolderItemsControl");var b=k("#folderItemsContainerControl");if(b!==null){b.html(a)}};ep.folder.updateToolbarFolderControl=function(){ep.debug("ep/updatefolder.js -> updateToolbarFolderControl");var a=k("#toolbarFolder");if(!a){return}var b=a.find("a").first();if(!b){b=a.find(".folder-control, .folder-control-empty").first()}b.removeClass().addClass("link color-s1");if(lngFolderCount>0){b.addClass("folder-control");b.attr("title",ep.messages.folderHasItemsTitle)}else{b.addClass("folder-control-empty");b.attr("title",ep.messages.folderHasNoItemsTitle)}};ep.folder.updateToolbarFolderCount=function(a){ep.debug("ep/updatefolder.js -> updateToolbarFolderCount");if(a){lngFolderCount++}else{lngFolderCount--}ep.folder.updateToolbarFolderControl()};function p(){ep.debug("ep/updatefolder.js -> UpdateMainFolderStyles");var a=k("#toolbarFolder");if(!a){return}var b=a.find("a").first();if(!b){b=a.find(".folder-control, .folder-control-empty").first()}b.removeClass().addClass("link color-s1");if(b){if(lngFolderCount>0){b.addClass("folder-control");b.attr("title",ep.messages.folderHasItemsTitle)}else{b.addClass("folder-control-empty");b.attr("title",ep.messages.folderHasNoItemsTitle)}}}function j(){ep.debug("ep/updatefolder.js -> UpdateMainFolderImage");var b;var c=k("#folderHasItemsHeader");if(c.length){b=c.children().first()}var a="";if(b){if(lngFolderCount>0){a=FolderHasItems;b.html(a).removeClass().addClass("link folder_items_main")}else{a=FolderHasNoItems;b.html(a).removeClass().addClass("link folder_empty_main")}}}ep.folder.addAll=function(){ep.debug("ep/updatefolder.js -> addAll");var c=k("[name='addToFolder']");if(c===null||c===undefined||!c.length){return}var b="";k.each(c,function(e,h){var d=k(this);var f=d.attr("id").replace("add_","");var g=k("#addVal_"+f);var r=d.attr("data-contenttype");if(r&&r==="companyinfo"){if(g&&(g.is(":checked")||document.forms[0]["addVal_"+f].checked)){this.hide()}else{return}}else{if(!d.is(":visible")){return}ep.folder.toggleAddToFolderIcon(f,true)}b+=ep.folder.generateItemXml(f)});if(k.trim(b)!==""){var a="<Items>"+b+"</Items>";ep.folder.addAllXML(a);setTimeout(ep.dialog.ToggledPopup.closeDialog,1000)}};ep.folder.addAllXML=function(a){var c=ep.utilities.replaceEPCommand("addallfolderitems");var b=k.ajax({url:c,type:"POST",data:{ItemsXML:a}}).done(ep.folder.addRemoveItemComplete)};ep.folder.generateItemXml=function(d){ep.debug("ep/updatefolder.js -> generateItemXml");if(d===null){return null}var t=ep.folder.getAddValIndexElem(d);if(!t){return ep.folder.generateExternalSourceItemXml(d)}var b="";var f="";var u="";var e="";var c="";var g="";var v=t.val().replace(/\n/g,"");var a=k.parseJSON(v);if(a.doid!==undefined&&t!==null){b=a.doid}if(a.segid!==undefined&&a.segid!==null){f=a.segid}if(a.resultID!==undefined&&a.resultID!==null){c=a.resultID}if(a.ebookFormat!==undefined&&a.ebookFormat!==null){u=a.ebookFormat}if(a.abookFormat!==undefined&&a.abookFormat!==null){e=a.abookFormat}if(a.companyFormat!==undefined&&a.companyFormat!==null){g=a.companyFormat}var h='<Item Db="'+a.db+'" UITerm="'+a.uiTerm+'" DOID="'+b+'" SegID="'+f+'" IsEbookFormat="'+u+'" IsAbookFormat="'+e+'" IsCompanyFormat="'+g+'" UITag="'+a.uiTag+'" ResultID="'+c+'"><Title><![CDATA['+a.title+"]]></Title></Item>";return h};ep.folder.generateExternalSourceItemXml=function(b){ep.debug("ep/updatefolder.js -> generateExternalSourceItemXml");var a='<Item ResultID="'+b+'"></Item>';return a};ep.folder.SwapFolderImages=function(a){ep.debug("ep/updatefolder.js -> SwapFolderImages");if(a){k("#resultListInnerDiv").find(".item-not-in-folder").each(function(){this.addClass("item-saving-to-folder")})}else{k("#resultListInnerDiv").find(".item-not-in-folder").each(function(){this.removeClass("item-saving-to-folder").removeClass("item-not-in-folder").removeClass("item-in-folder")})}};function o(){ep.debug("ep/updatefolder.js -> SwapAllStyles");var a=k("[name='addToFolder']");k.each(a,function(c,b){ep.folder.swapItemStyle(k(this).attr("id").match(/\d+/)[0],true)})}ep.folder.addToFolderExternal=function(d,b){ep.debug("ep/updatefolder.js -> addToFolderExternal");if(d===null||d.length===0){return}if(b===null||b.length===0){return}var c=parent.frames[0].frameElement;if(c===null){return}var h=c.contentDocument;if(!h){try{h=c.contentWindow.document}catch(f){return}}var e=h.getElementById(d);if(e===null){return}var v=k(e).val().replace(/\n/g,"");if(v===null||v.length===0){return}var a=k.parseJSON(v);var g=k(h.body).find(".item-not-in-folder").first();var w=k(h.body).find(".item-in-folder").first();var x=ep.utilities.replaceEPCommand("addremovefolderitem");var u=k.ajax({url:x,type:"POST",data:{DB:a.db,UITag:a.uiTag,UITerm:a.uiTerm,ResultID:a.resultID,Title:a.title,IsExternalItem:false,AddToFolder:b,RenderFolderControl:false}}).done(function(q){if(b){g.hide();w.show()}else{g.show();w.hide()}})};ep.folder.selectDeselectAll=function(d){ep.debug("ep/updatefolder.js -> selectDeselectAll");if(d===null||d===undefined){return}var a=k(d).is(":checked");ep.folder.showHideLoadingImage(a,true);ep.folder.updateFolderSelectedItemsPage(a);var c=ep.utilities.replaceEPCommand("selectfolderitems");var b=k.ajax({url:c,type:"POST",data:{IsSelectAll:a},dataType:"json"}).done(function(g,f,e){ep.folder.selectFolderItemsComplete(g,a)})};ep.folder.showHideLoadingImage=function(f,d){ep.debug("ep/updatefolder.js -> showHideLoadingImage");var e=k("#imgLoadingContainer");var g=k(f?"#selectingContainer":"#deselectingContainer");var a=k("#selectDeselectContainer");var c="no-display";var b="folder-select-deselect-container";if(d){a.removeClass().addClass(c);g.removeClass().addClass(b);e.removeClass().addClass(b)}else{a.removeClass().addClass(b);g.removeClass().addClass(c);e.removeClass().addClass(c)}};ep.folder.updateFolderSelectedItemsPage=function(a){ep.debug("ep/updatefolder.js -> updateFolderSelectedItemsPage");var d="folder-list-item";var c="folder-list-item-selected";if(a===false){d="folder-list-item-selected";c="folder-list-item"}var b=k("."+d);b.each(function(){var f=k(this);f.removeClass().addClass(c);var e=f.children().first().children().first();e.attr("checked",a)})};ep.folder.selectFolderItemsComplete=function(a,b){ep.debug("ep/updatefolder.js -> selectFolderItemsComplete");ep.folder.showHideLoadingImage(b,false);try{if(a!==null){ep.displayutilities.SelectedItems=a.items;aSelectedFolderItemCount=ep.displayutilities.SelectedItems.length}}catch(c){}};ep.folder.folderItemsRefresh=function(){ep.debug("ep/updatefolder.js -> folderItemsRefresh");if(typeof EPWebServices!=="undefined"&&typeof EPWebServices.FolderWebService.FolderItemsRefresh==="function"){EPWebServices.FolderWebService.FolderItemsRefresh(window.GetSessionParms(),FolderItemsRefreshAjax)}return false}})(jQuery);var Class=(function(){var p=(function(){for(var a in {toString:1}){if(a==="toString"){return false}}return true})();function r(){}function m(){var a=null,b=Array.prototype.slice.call(arguments);if(typeof b[0]==="function"){a=b.shift()}function d(){this.initialize.apply(this,arguments)}d.addMethods=Class.Methods.addMethods;d.superclass=a;d.subclasses=[];if(a){r.prototype=a.prototype;d.prototype=new r();a.subclasses.push(d)}for(var c=0,e=b.length;c<e;c++){d.addMethods(b[c])}if(!d.prototype.initialize){d.prototype.initialize=Class.emptyFunction}d.prototype.constructor=d;return d}function q(h){var e=this.superclass&&this.superclass.prototype,d=(function(x){if(!x||(typeof x!=="object")){return}var w=[];for(var v in x){if(x.hasOwnProperty(v)){w.push(v)}}return w})(h);if(p){if(h.toString!==Object.prototype.toString){d.push("toString")}if(h.valueOf!==Object.prototype.valueOf){d.push("valueOf")}}function b(u,v){return function(){return u[v].apply(this,arguments)}}for(var f=0,g=d.length;f<g;f++){var a=d[f],c=h[a];if(e&&typeof c==="function"&&c.argumentNames()[0]==="$super"){var i=c;c=b(e,a).wrap(i);c.valueOf=l(i.valueOf,i);c.toString=l(i.toString,i)}this.prototype[a]=c}return this}var j=Array.prototype.slice;function n(a,d){var b=a.length,c=d.length;while(c--){a[b+c]=d[c]}return a}function k(a,b){a=j.call(a,0);return n(a,b)}function o(b,a){var c=b;return function(){var d=n([l(c,b)],arguments);return a.apply(b,d)}}function l(a,b){if(arguments.length<2&&(typeof arguments[0]==="undefined")){return a}var d=a,c=j.call(arguments,1);return function(){var e=k(c,arguments);return d.apply(b,e)}}return{create:m,emptyFunction:function(){return},Methods:{addMethods:q}}})();(function(c,d){c.extend(d,(function(){var X={},I={},M=d.queues.instance||[],J=d.queues.dependencies||[],P="css/",a="javascript/",D="javascript/";function Q(){if(window.loadFirebugConsole){window.loadFirebugConsole()}try{if(console.log.apply){console.log.apply(this,arguments)}else{console.log(Array.prototype.slice.call(arguments))}}catch(e){}}function N(e,m,k){if(!e){if(c.isFunction(k)){k(m)}return m||{}}var j=e.split("."),h=j.pop(),i=window,g,f=j.length,l=-1;for(;++l<f;){g=j[l];if(!i[g]){i[g]={}}i=i[g]}i=i[h]=m||{};if(c.isFunction(k)){k(i)}d.publish(e+":ready",i,true);return i}function E(h,f,j,e){f.epId=h;var i;if(j){var g=K(j);if(!c.isFunction(g)){M.unshift(j);F(function(){R(h,f,j,e)});return}return N(h,Class.create(g,f),e)}else{return N(h,Class.create(f),e)}}var R=jQuery.proxy(E,this);function W(g,i,f,e){var h=K(i);if(!c.isFunction(h)){M.unshift(i);F(function(){b(g,i,f,e)});return}f.epId=g;f=c.extend(X[g]||{},f);return N(g,new h(f),e)}var b=jQuery.proxy(W,this);function K(f){if(!f){return}var g=f.split("."),i=g.length,h=window,j,e;for(j=0;j<i;j++){e=g[j];if(!h[e]){return null}h=h[e]}return h}function O(g,f,i){if(!g){return}if(typeof g==="string"){g={epId:g}}else{if(!g.epId){throw ("ep.getInstance called with invalid parameters")}}var e=g.epId;if(X[e]){g=c.extend(X[e],g)}g.callback=(g.callback||f||c.noop);X[e]=g;if(c.isArray(i)){J=J.concat(i);M.push(e);T();return}var h=K(e);if(!h){if(!g.loading){g.loading=true;C(g.epId.split(".").join("/").toLowerCase()+".js")}M.push(e);return}else{if(c.isFunction(h.updateProperties)){h.updateProperties(g)}else{c.extend(h,g)}g.callback.call(h);return h}}function S(){var e=(d.bundles||d.pageScripts||[]),i=c('link[rel="stylesheet"]');i.each(function(){e.push(this.href)});var g=/(?:url\(').+(?='\);)/gi,h;i=c("style");i.each(function(){h=this.innerHTML.match(g)||[];c.each(h,function(k,l){e.push(l.replace("url('",""))})});var f,j=e.length;g=/\/(css|javascript)\//gi;while(j--){f=e[j];if(f.indexOf(d.baseImagePath)>-1){f=f.split(d.baseImagePath).pop().replace(g,"")}I[f]=true}}function C(e,f){var g=f||c.noop;if(!I[e]){$LAB.script(d.getFullUrl(e,a)).wait(function(){I[e]=true;g()})}else{g()}setTimeout(T,50)}function H(e,f){var g=f||c.noop;c.ajax({url:d.getFullUrl(e,D)}).done(function(h){g(h)});setTimeout(T,50)}function V(f,g,e){if(!I[f]){f=d.getFullUrl(f,P);var h=document.createElement("link");h.setAttribute("rel","stylesheet");h.setAttribute("type","text/css");h.setAttribute("href",f);if(g&&typeof g==="string"){h.setAttribute("media",g)}var i=document.getElementsByTagName("head");if(i&&i.length>0){i[0].appendChild(h);I[f]=true;if(c.isFunction(e)){setTimeout(e,250)}}}else{if(c.isFunction(e)){e()}}}function F(f){if(!c.isFunction(f)){f=F}if(M.length){var e=M.shift();O(e);setTimeout(f,50)}}function T(){if(!d.initialized){d.initialized=true}if(J.length){var e=J.shift(),f=e,h,g;if(typeof f!=="string"){f=e.url;h=e.callback;g=e.media}if(/\.css/.test(f)){V(f,g,h)}else{if(/\.js/.test(f)){C(f,h)}else{if(/\.html/.test(f)){H(f,h)}else{O(f)}}}setTimeout(T,50)}else{F()}}function B(g,f){var e=g;if(c.isArray(e)){e=g.pop();J=J.concat(g)}J.push(c.isFunction(f)?{url:e,callback:f}:e);if(d.initialized){T()}}function U(){var e="eptemplate/";d.templates=c('body script[type^="'+e+'"]');if(d.templates.length){B(["jquery/plugins/jquery.tmpl.js",d.brandingPath+"templates/js/eptemplate.js"])}}function L(){var e=/defer-image\|(.+)/,f;c("[class*='defer-image']").each(function(g){f=e.exec(this.className||"");if(f&&f.length>1){this.src=f[1];this.className=c.trim(this.className.split(f[0]).join(""))}})}function G(){c("img[data-defer-image]").each(function(){this.src=c(this).data("defer-image")})}d.domLoad(function(){S();U();T();G()});return{registerClass:E,registerInstance:W,register:N,getInstance:O,require:B,loadImages:L,debug:(d.version==="1.0.0.0"?Q:c.noop)}})())})(jQuery,ep);(function(m){var l=m(),q=250,o;function k(){l=t();if(l.length&&!l.parent().length){m("body").append(l)}o=setTimeout(p,q)}function p(){if(l.parent().length){l.detach()}}function t(){return l||(m("#epAjaxActive").length?m("#epAjaxActive"):m('<div id="epAjaxActive" />'))}function s(){return l.html()||(ep.messages||{}).Loading||"Loading..."}function n(){l=t();l.html(s()).ajaxSend(k).ajaxComplete(p);k()}function r(){l.remove();l=null}m(window).load(p);m(document).ready(n);m(window).unload(r)})(jQuery);(function(f){var e={};this.parseJTemplate=function d(h,a){var b=e[h];if(!b){var c="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+h.replace(/[\r\t\n]/g," ").replace(/'(?=[^#]*#>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<#=(.+?)#>/g,"',$1,'").split("<#").join("');").split("#>").join("p.push('")+"');}return p.join('');";b=new Function("obj",c);e[h]=b}return b(a)}})(jQuery);(function(b){ep.register("ep.util.JSON",(function(){function a(g){if(JSON&&JSON.stringify){if(Array.prototype.toJSON){var f=Array.prototype.toJSON;Array.prototype.toJSON=null;var h=JSON.stringify(g);Array.prototype.toJSON=f;return h}else{return JSON.stringify(g)}}}return{stringify:a}})())})(jQuery);var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(b){ep.register("ep.util.iframe",(function(){function a(c,e,d){if(d>35){return}var f=i(c);if(f==="complete"){e();return}setTimeout(function(){a(c,e,d+1)},100)}function i(p){var d=b(p);var g="epNotReady";if(d&&d.length){var f=d[0];if(f&&f.readyState){g=f.readyState}}if(g==="epNotReady"){var e=[];try{e=d.contents()}catch(o){e=null}if(e&&e.length){var c=e[0];if(c&&c.readyState){g=c.readyState}}}return g}var h=false;function j(d,c){if(!h||c>25){h=false;return}d.focus();setTimeout(function(){j(d,c+1)},100)}function k(c){b(document).bind("focusin.focusfix",function(d){if(d.target.tagName==="IFRAME"){b(document).unbind("focusin.focusfix");b(document).bind("click.focusfix keydown.focusfix",function(){l()});b(document).bind("focusin.focusfix",function(e){if(e.target!==c){l()}});h=true;j(c,1)}})}function l(){h=false;b(document).unbind(".focusfix")}return{pdfReady:function(d,c){a(d,c,0)},preventPdfFocus:function(c){k(c)}}})())})(jQuery);ep.registerClass("ep.base.Controller",{loaded:false,loading:false,initialize:function(b){jQuery.extend(this,b);ep.domLoad(jQuery.proxy(this._domLoaded,this));ep.windowLoad(jQuery.proxy(this._windowLoaded,this));jQuery(window).unload(jQuery.proxy(this._windowUnLoaded,this))},_domLoaded:function(){if(!this.loaded){this.onDomLoad();this.loaded=true}},_windowLoaded:function(){this.onLoad()},_windowUnLoaded:function(){this.onUnload()},onDomLoad:jQuery.noop,onLoad:jQuery.noop,onUnload:jQuery.noop});ep.registerClass("ep.base.PageController",{loader:null,query:{},initialize:function($super,b){$super(b)},_domLoaded:function($super){$super()},_windowLoaded:function($super){$super()}},"ep.base.Controller");ep.registerClass("ep.base.ModuleController",{loadMarkup:false,markupUrl:null,containerId:null,container:[],onUpdate:jQuery.noop,ModuleJson:null,updateMethod:"get",initialize:function($super,b){$super(b)},_domloaded:function($super){this.container=jQuery("#"+this.containerId);$super();if(this.loadMarkup){this.update()}},_windowUnLoaded:function($super){this.container=[];$super()},updateProperties:function(b){jQuery.extend(this,b);if(b.containerId){this.container=jQuery("#"+this.containerId)}},update:function(f,d,e){f=f||this.params||{};jQuery.extend(this,f);this.container=jQuery("#"+(e?e:this.containerId));d=this.markupUrl||d;if(!this.container.length){throw ("ep.base.ModuleController.load called without a valid containerId [containerId: "+(e||this.containerId)+"]. ")}if(!d){throw ("ep.base.ModuleController.load called without a valid markupUrl [markupUrl: "+d+"]. ")}jQuery.ajax({url:d,type:this.updateMethod.toUpperCase(),data:f,context:this,beforeSend:this.onBeforeSend,success:this.onSuccess,error:this.onError,traditional:true})},onBeforeSend:function(){this.loaded=false;this.loading=true},onSuccess:function(e,d,f){this.ModuleJson=jQuery.parseJSON(f.getResponseHeader("X-JSON"));ep.debug("ModuleController:onSuccess");this.loaded=true;this.loading=false;this.container.html(e);this.container.trigger("Module_updated",[this]);this.onUpdate();if(this.container.length&&this.container.parent().length){this.container.parent().show()}this.params=null},onError:function(d,e,f){ep.debug(f)}},"ep.base.Controller");ep.register("ep.manager.ClientStateManager",function(e){var g="ClientState";function f(c,d,b,a){e.ajax({url:ep.utilities.replaceEPCommand(g+"/"+c),data:{theGroup:d,theComponent:b.id,theValue:a}}).done(function(j){h(b,"updated",j)}).fail(function(j){h(b,"failed",j)})}function h(b,c,a){e(b).trigger("ep_manager_ClientStateManager_"+c)}return{setBool:function(c,b,a){f("UpdateBool",c,b,a)}}}(jQuery));(function(z){var r="collapse-content",D="."+r+",[data-"+r+"]",F="collapse-toggle",t="."+F+",[data-"+F+"]",x="active",v="disableexpandcollapse",s=0;function u(b){var a=null,c=b.data(r);if(c){if(c.trigger){a=w(c.trigger)}else{if(typeof c==="string"){a=w(c)}}return a}else{if(b.prevAll(t).first().length){a=b.prevAll(t).first()}else{if(b.parents(t).first().length){a=b.parents(t).first()}}}return a}function E(a){var b=null,c=a.data(F);if(c){if(c.target){return w(c.target)}else{if(typeof c==="string"){return w(c)}}}if(a.nextAll(D).first().length){b=a.nextAll(D).first()}else{if(a.children(D).first().length){b=a.children(D).first()}}return b}function w(a){var b=(a.indexOf("#")>-1)||(a.indexOf(".")>-1)?z(a):z("#"+a);return b.length?b:null}function y(a){var c,b,d=false;if(a.hasClass(F)||a.data(F)){b=a;c=E(b)}else{if(a.hasClass(r)||a.data(r)){c=a;b=u(c)}}if((b&&b.data(v)==="true")||(c&&c.data(v)==="true")){d=true}if(c){c.data("trigger",b);b.data("target",c)}return{trigger:b,target:c,isDisabled:d}}function A(b,c,a){if(!b||!c){return}var e=(a===true)?true:c.is(":visible");b[e?"addClass":"removeClass"](x);var d=b.data(F);if(!d||!(d.onText||d.offText)){B(e,ep.messages.hide_this_area,ep.messages.show_this_area,b,{titleOnly:true})}else{if(d){B(e,d.onText,d.offText,b,d)}}c.attr("aria-expanded",function(g,h){var f;if(h==="true"){f="false"}else{if(h==="false"){f="true"}}return f});b.trigger("toggled")}function B(e,b,c,a,d){if(b&&e&&a.attr("title")===c){q(b,a,d)}else{if(c&&!e&&a.attr("title")===b){q(c,a,d)}}}function q(c,a,b){a.attr("title",c);if(b){if(!b.titleOnly){a.html(c)}if(b.toggleIcon){a.find(".icon-trigger").html(c)}}}function C(b,a){ep.debug("expandcollapse: update()");b.preventDefault();var c=y(z(this));if(!c.target||!c.trigger||c.isDisabled){return}if(a===undefined){c.target.toggle();A(c.trigger,c.target)}else{c.target.toggle(a===true);A(c.trigger,c.target,(a===true))}c.target.trigger("toggled")}z(D).live("toggleVisibility",C);z(t).live("click",C);z(function(){z(t).each(function(){var c=z(this),d=y(c),b=d.target,a;if(!d.target||!d.trigger||d.isDisabled){return}a=b.attr("aria-expanded");if(a==="true"||a==="false"){c.attr("id",function(e,f){if(!f){return"expandCollapseTrigger"+s}});b.attr("id",function(e,f){if(!f){return"expandCollapseTarget"+s}});s++;c.attr("aria-controls",function(e,f){if(!f){return b.attr("id")}});b.attr("aria-labelledby",function(e,f){if(!f){return c.attr("id")}});c.attr("title",function(e,f){if(!f){if(a==="true"){return ep.messages.hide_this_area}else{if(a==="false"){return ep.messages.show_this_area}}}})}})})})(jQuery);ep.registerInstance("ep.controller.CollapsibleController","ep.base.Controller",{containers:[],stateManager:null,openClass:"-open",closeClass:"-closed",toggleClass:"-toggle",containerClass:"collapsible",onDomLoad:function(){this.initContainers();if(this.containers.length){this.initStateManager();this.setEvents()}},initContainers:function(){this.containers=jQuery("."+this.containerClass)},initStateManager:function(){var b=ep.getInstance("ep.manager.ClientStateManager");if(!b){jQuery(document).bind("ep_manager_ClientStateManager_ready",jQuery.proxy(this.onStateManagerReady,this))}else{this.stateManager=b}},onStateManagerReady:function(b){this.stateManager=b.memo},setEvents:function(){this.containers.each(jQuery.proxy(function(d,c){jQuery(c).click(jQuery.proxy(function(a){this.containerClickHandler(a,c)},this));this.setToggleMessage(c)},this))},containerClickHandler:function(f,e){var d=jQuery(f.target);if(d.hasClass(this.containerClass+this.toggleClass)){f.preventDefault();this.toggle(e)}},toggle:function(c){jQuery(document.body).toggleClass(c.id+this.openClass);jQuery(document.body).toggleClass(c.id+this.closeClass);var d=this.getIsOpen(c);jQuery(c).trigger({type:"collapsible_toggled",data:{state:d}});this.setToggleMessage(c);if(this.stateManager){this.stateManager.setBool(this.page,c,d)}},getIsOpen:function(b){return jQuery(document.body).hasClass(b.id+this.openClass)},setToggleMessage:function(c){if(ep.messages[c.id+this.openClass]&&ep.messages[c.id+this.closeClass]){var d=this.getIsOpen(c);jQuery(c).find("."+this.containerClass+this.toggleClass).each(jQuery.proxy(function(a,b){b.title=ep.messages[c.id+(d?this.openClass:this.closeClass)]},this))}}});(function(h){ep.register("ep.controller.control.OptionsControlsDropdowns");var e=ep.controller.control.OptionsControlsDropdowns;var g=function(a,b,c){a.addClass("active").removeClass(b);if(c){a.addClass(c)}};var f=function(a,b,c){a.removeClass("active").addClass(b);if(c){a.removeClass(c)}};e.init=function(a){var c=h("#optionsControls"),b=c.find(".collapse-content");b.on("toggled",function(v){var q=h(this),w=q.data("trigger"),t=c,x=t.find(".collapse-toggle"),u=t.find(".collapse-content").not(q),r="color-s1",s=(a)?"color-p1":null;f(x,r,s);g(w,r,s);u.hide();if(!q.is(":visible")){f(w.add(x),r,s)}});var d=h("#alertSaveShareWrapper");if(d.length>0){d.find(".add-all-side").on("click",function(){setTimeout(function(){d.trigger("toggleVisibility")},1500)})}}})(jQuery);(function(k){var i;function n(a){if(typeof a==="string"&&a.length){return a.indexOf("=")>-1?a.toQueryParams():{anchor:a}}return k.isPlainObject(a)?a:{}}function m(d){if(!d){return}var b=n(location.hash.substr(1)),c=k.isEmptyObject(b),a=location.href;d=n(d);k.extend(b,d);b="#"+k.param(b);if(b!==location.hash){ep.debug("updateHash:",d);a=location.hash.length?a.replace(/#.*/,b):a+b;location.replace(a)}}function h(a){if(!a||!k("#"+a+',[name="'+a+'"]').length){return}ep.debug("updateAnchor:",a);if(a!==i){m({anchor:a})}i=a;j(a)}function j(a){var b=k("#"+a+',[name="'+a+'"]');if(b.length){ep.publish("anchorscroll",a);ep.debug("updateScroll:",a);setTimeout(function(){if(k.isFunction(b.scrollAndExpand)){b.scrollAndExpand()}else{window.scrollTo(0,b.offset().top)}},10)}}ep.register("ep.util.url",{updateHash:m,updateAnchor:h});k('a[href^="#"]').live("click",function(a){a.preventDefault();if(this.hash&&this.hash.length){h(this.hash.substr(1))}});function l(a){k(window).unbind("hashchange",l);ep.debug("onhashchange:",location.hash);if(location.hash){i=location.hash.substr(1).toQueryParams().anchor;h(i)}}k(window).bind("hashchange",l);k(function(){k(window).trigger("hashchange")})})(jQuery);(function(b){b(function(){var d=b('input[id$="logoLink"]'),a=ep.utilities.buildAjaxRequestPath("Search/GoToNewSearch");d.click(function(){window.top.location=a;return false})})})(jQuery);(function(b){b.fn.watermark=function(a,d){return b(this).each(function(){var g=b(this);if(a){if(d){g.addClass(d)}if(!Modernizr.input.placeholder){g.val(g.attr("placeholder"));b("[placeholder]").focus(function(){if(b(this).val()===b(this).attr("placeholder")){b(this).val("")}}).blur(function(){if(b(this).val()===""||b(this).val()===b(this).attr("placeholder")){b(this).val(b(this).attr("placeholder"))}});b("[placeholder]").parents("form").submit(function(){b(this).find("[placeholder]").each(function(f,e){if(b(e).val()===b(e).attr("placeholder")){b(e).val("")}})})}}else{var h=g.parent().find('label[for="'+g.attr("id")+'"]').first();if(h.length){h.addClass(d);h.addClass("overlabel-apply");var c=b.proxy(function(f,e){f[!g.val().length&&!e?"addClass":"removeClass"]("overlabel-apply");f[!g.val().length&&!e?"removeClass":"addClass"]("hidden")},this);g.keyup(function(){c(h,false)});g.keydown(function(){c(h,true)});c(h,false)}}})}})(jQuery);(function(b){b.extend(b.fn,{validate:function(a){if(!this.length){a&&a.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var f=b.data(this[0],"validator");if(f){return f}this.attr("novalidate","novalidate");f=new b.validator(a,this[0]);b.data(this[0],"validator",f);if(f.settings.onsubmit){var e=this.find("input, button");e.filter(".cancel").click(function(){f.cancelSubmit=true});if(f.settings.submitHandler){e.filter(":submit").click(function(){f.submitButton=this})}this.submit(function(d){if(f.settings.debug){d.preventDefault()}function c(){if(f.settings.submitHandler){if(f.submitButton){var h=b("<input type='hidden'/>").attr("name",f.submitButton.name).val(f.submitButton.value).appendTo(f.currentForm)}f.settings.submitHandler.call(f,f.currentForm);if(f.submitButton){h.remove()}return false}return true}if(f.cancelSubmit){f.cancelSubmit=false;return c()}if(f.form()){if(f.pendingRequest){f.formSubmitted=true;return false}return c()}else{f.focusInvalid();return false}})}return f},valid:function(){if(b(this[0]).is("form")){return this.validate().form()}else{var d=true;var a=b(this[0].form).validate();this.each(function(){d&=a.element(this)});return d}},removeAttrs:function(e){var a={},f=this;b.each(e.split(/\s/),function(d,c){a[c]=f.attr(c);f.removeAttr(c)});return a},rules:function(o,r){var m=this[0];if(o){var p=b.data(m.form,"validator").settings;var k=p.rules;var a=b.validator.staticRules(m);switch(o){case"add":b.extend(a,b.validator.normalizeRule(r));k[m.name]=a;if(r.messages){p.messages[m.name]=b.extend(p.messages[m.name],r.messages)}break;case"remove":if(!r){delete k[m.name];return a}var l={};b.each(r.split(/\s/),function(d,c){l[c]=a[c];delete a[c]});return l}}var n=b.validator.normalizeRules(b.extend({},b.validator.metadataRules(m),b.validator.classRules(m),b.validator.attributeRules(m),b.validator.staticRules(m)),m);if(n.required){var q=n.required;delete n.required;n=b.extend({required:q},n)}return n}});b.extend(b.expr[":"],{blank:function(a){return !b.trim(""+a.value)},filled:function(a){return !!b.trim(""+a.value)},unchecked:function(a){return !a.checked}});b.validator=function(a,d){this.settings=b.extend(true,{},b.validator.defaults,a);this.currentForm=d;this.init()};b.validator.format=function(a,d){if(arguments.length==1){return function(){var c=b.makeArray(arguments);c.unshift(a);return b.validator.format.apply(this,c)}}if(arguments.length>2&&d.constructor!=Array){d=b.makeArray(arguments).slice(1)}if(d.constructor!=Array){d=[d]}b.each(d,function(f,c){a=a.replace(new RegExp("\\{"+f+"\\}","g"),c)});return a};b.extend(b.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:b([]),errorLabelContainer:b([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(a,d){this.lastActive=a;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(a)).hide()}},onfocusout:function(a,d){if(!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))){this.element(a)}},onkeyup:function(a,d){if(a.name in this.submitted||a==this.lastElement){this.element(a)}},onclick:function(a,d){if(a.name in this.submitted){this.element(a)}else{if(a.parentNode.name in this.submitted){this.element(a.parentNode)}}},highlight:function(e,a,f){if(e.type==="radio"){this.findByName(e.name).addClass(a).removeClass(f)}else{b(e).addClass(a).removeClass(f)}},unhighlight:function(e,a,f){if(e.type==="radio"){this.findByName(e.name).removeClass(a).addClass(f)}else{b(e).removeClass(a).addClass(f)}}},setDefaults:function(a){b.extend(b.validator.defaults,a)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:b.validator.format("Please enter no more than {0} characters."),minlength:b.validator.format("Please enter at least {0} characters."),rangelength:b.validator.format("Please enter a value between {0} and {1} characters long."),range:b.validator.format("Please enter a value between {0} and {1}."),max:b.validator.format("Please enter a value less than or equal to {0}."),min:b.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=b(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||b(this.currentForm);this.containers=b(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var a=(this.groups={});b.each(this.settings.groups,function(d,c){b.each(c.split(/\s/),function(i,j){a[j]=d})});var e=this.settings.rules;b.each(e,function(d,c){e[d]=b.validator.normalizeRule(c)});function f(c){var d=b.data(this[0].form,"validator"),h="on"+c.type.replace(/^validate/,"");d.settings[h]&&d.settings[h].call(d,this[0],c)}b(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",f).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",f);if(this.settings.invalidHandler){b(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}},form:function(){this.checkForm();b.extend(this.submitted,this.errorMap);this.invalid=b.extend({},this.errorMap);if(!this.valid()){b(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,d=(this.currentElements=this.elements());d[a];a++){this.check(d[a])}return this.valid()},element:function(d){d=this.validationTargetFor(this.clean(d));this.lastElement=d;this.prepareElement(d);this.currentElements=b(d);var a=this.check(d);if(a){delete this.invalid[d.name]}else{this.invalid[d.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return a},showErrors:function(d){if(d){b.extend(this.errorMap,d);this.errorList=[];for(var a in d){this.errorList.push({message:d[a],element:this.findByName(a)[0]})}this.successList=b.grep(this.successList,function(c){return !(c.name in d)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){if(b.fn.resetForm){b(this.currentForm).resetForm()}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var f=0;for(var a in e){f++}return f},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{b(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(a){}}},findLastActive:function(){var a=this.lastActive;return a&&b.grep(this.errorList,function(d){return d.element.name==a.name}).length==1&&a},elements:function(){var d=this,a={};return b(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&d.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in a||!d.objectLength(b(this).rules())){return false}a[this.name]=true;return true})},clean:function(a){return b(a)[0]},errors:function(){return b(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=b([]);this.toHide=b([]);this.currentElements=b([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(n){n=this.validationTargetFor(this.clean(n));var j=b(n).rules();var m=false;for(var e in j){var k={method:e,parameters:j[e]};try{var a=b.validator.methods[e].call(this,n.value.replace(/\r/g,""),n,k.parameters);if(a=="dependency-mismatch"){m=true;continue}m=false;if(a=="pending"){this.toHide=this.toHide.not(this.errorsFor(n));return}if(!a){this.formatAndAdd(n,k);return false}}catch(l){this.settings.debug&&window.console&&console.log("exception occured when checking element "+n.id+", check the '"+k.method+"' method",l);throw l}}if(m){return}if(this.objectLength(j)){this.successList.push(n)}return true},customMetaMessage:function(a,e){if(!b.metadata){return}var f=this.settings.meta?b(a).metadata()[this.settings.meta]:b(a).metadata();return f&&f.messages&&f.messages[e]},customMessage:function(f,e){var a=this.settings.messages[f];return a&&(a.constructor==String?a:a[e])},findDefined:function(){for(var a=0;a<arguments.length;a++){if(arguments[a]!==undefined){return arguments[a]}}return undefined},defaultMessage:function(a,d){return this.findDefined(this.customMessage(a.name,d),this.customMetaMessage(a,d),!this.settings.ignoreTitle&&a.title||undefined,b.validator.messages[d],"<strong>Warning: No message defined for "+a.name+"</strong>")},formatAndAdd:function(h,f){var g=this.defaultMessage(h,f.method),a=/\$?\{(\d+)\}/g;if(typeof g=="function"){g=g.call(this,f.parameters,h)}else{if(a.test(g)){g=jQuery.format(g.replace(a,"{$1}"),f.parameters)}}this.errorList.push({message:g,element:h});this.errorMap[h.name]=g;this.submitted[h.name]=g},addWrapper:function(a){if(this.settings.wrapper){a=a.add(a.parent(this.settings.wrapper))}return a},defaultShowErrors:function(){for(var f=0;this.errorList[f];f++){var a=this.errorList[f];this.settings.highlight&&this.settings.highlight.call(this,a.element,this.settings.errorClass,this.settings.validClass);this.showLabel(a.element,a.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(var f=0;this.successList[f];f++){this.showLabel(this.successList[f])}}if(this.settings.unhighlight){for(var f=0,e=this.validElements();e[f];f++){this.settings.unhighlight.call(this,e[f],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return b(this.errorList).map(function(){return this.element})},showLabel:function(f,e){var a=this.errorsFor(f);if(a.length){a.removeClass(this.settings.validClass).addClass(this.settings.errorClass);a.attr("generated")&&a.html(e)}else{a=b("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(f),generated:true}).addClass(this.settings.errorClass).html(e||"");if(this.settings.wrapper){a=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(a).length){this.settings.errorPlacement?this.settings.errorPlacement(a,b(f)):a.insertAfter(f)}}if(!e&&this.settings.success){a.text("");typeof this.settings.success=="string"?a.addClass(this.settings.success):this.settings.success(a)}this.toShow=this.toShow.add(a)},errorsFor:function(d){var a=this.idOrName(d);return this.errors().filter(function(){return b(this).attr("for")==a})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){if(this.checkable(a)){a=this.findByName(a.name).not(this.settings.ignore)[0]}return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){var d=this.currentForm;return b(document.getElementsByName(a)).map(function(f,c){return c.form==d&&c.name==a&&c||null})},getLength:function(d,a){switch(a.nodeName.toLowerCase()){case"select":return b("option:selected",a).length;case"input":if(this.checkable(a)){return this.findByName(a.name).filter(":checked").length}}return d.length},depend:function(d,a){return this.dependTypes[typeof d]?this.dependTypes[typeof d](d,a):true},dependTypes:{"boolean":function(d,a){return d},string:function(d,a){return !!b(d,a.form).length},"function":function(d,a){return d(a)}},optional:function(a){return !b.validator.methods.required.call(this,b.trim(a.value),a)&&"dependency-mismatch"},startRequest:function(a){if(!this.pending[a.name]){this.pendingRequest++;this.pending[a.name]=true}},stopRequest:function(a,d){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[a.name];if(d&&this.pendingRequest==0&&this.formSubmitted&&this.form()){b(this.currentForm).submit();this.formSubmitted=false}else{if(!d&&this.pendingRequest==0&&this.formSubmitted){b(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(a){return b.data(a,"previousValue")||b.data(a,"previousValue",{old:null,valid:true,message:this.defaultMessage(a,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(a,d){a.constructor==String?this.classRuleSettings[a]=d:b.extend(this.classRuleSettings,a)},classRules:function(f){var e={};var a=b(f).attr("class");a&&b.each(a.split(" "),function(){if(this in b.validator.classRuleSettings){b.extend(e,b.validator.classRuleSettings[this])}});return e},attributeRules:function(j){var h={};var a=b(j);for(var g in b.validator.methods){var i;if(g==="required"&&typeof b.fn.prop==="function"){i=a.prop(g)}else{i=a.attr(g)}if(i){h[g]=i}else{if(a[0].getAttribute("type")===g){h[g]=true}}}if(h.maxlength&&/-1|2147483647|524288/.test(h.maxlength)){delete h.maxlength}return h},metadataRules:function(a){if(!b.metadata){return{}}var d=b.data(a.form,"validator").settings.meta;return d?b(a).metadata()[d]:b(a).metadata()},staticRules:function(f){var e={};var a=b.data(f.form,"validator");if(a.settings.rules){e=b.validator.normalizeRule(a.settings.rules[f.name])||{}}return e},normalizeRules:function(d,a){b.each(d,function(c,g){if(g===false){delete d[c];return}if(g.param||g.depends){var h=true;switch(typeof g.depends){case"string":h=!!b(g.depends,a.form).length;break;case"function":h=g.depends.call(a,a);break}if(h){d[c]=g.param!==undefined?g.param:true}else{delete d[c]}}});b.each(d,function(f,c){d[f]=b.isFunction(c)?c(a):c});b.each(["minlength","maxlength","min","max"],function(){if(d[this]){d[this]=Number(d[this])}});b.each(["rangelength","range"],function(){if(d[this]){d[this]=[Number(d[this][0]),Number(d[this][1])]}});if(b.validator.autoCreateRanges){if(d.min&&d.max){d.range=[d.min,d.max];delete d.min;delete d.max}if(d.minlength&&d.maxlength){d.rangelength=[d.minlength,d.maxlength];delete d.minlength;delete d.maxlength}}if(d.messages){delete d.messages}return d},normalizeRule:function(d){if(typeof d=="string"){var a={};b.each(d.split(/\s/),function(){a[this]=true});d=a}return d},addMethod:function(a,e,f){b.validator.methods[a]=e;b.validator.messages[a]=f!=undefined?f:b.validator.messages[a];if(e.length<3){b.validator.addClassRules(a,b.validator.normalizeRule(a))}},methods:{required:function(h,a,f){if(!this.depend(f,a)){return"dependency-mismatch"}switch(a.nodeName.toLowerCase()){case"select":var g=b(a).val();return g&&g.length>0;case"input":if(this.checkable(a)){return this.getLength(h,a)>0}default:return b.trim(h).length>0}},remote:function(i,l,h){if(this.optional(l)){return"dependency-mismatch"}var k=this.previousValue(l);if(!this.settings.messages[l.name]){this.settings.messages[l.name]={}}k.originalMessage=this.settings.messages[l.name].remote;this.settings.messages[l.name].remote=k.message;h=typeof h=="string"&&{url:h}||h;if(this.pending[l.name]){return"pending"}if(k.old===i){return k.valid}k.old=i;var a=this;this.startRequest(l);var j={};j[l.name]=i;b.ajax(b.extend(true,{url:h,mode:"abort",port:"validate"+l.name,dataType:"json",data:j,success:function(f){a.settings.messages[l.name].remote=k.originalMessage;var d=f===true;if(d){var g=a.formSubmitted;a.prepareElement(l);a.formSubmitted=g;a.successList.push(l);a.showErrors()}else{var c={};var e=f||a.defaultMessage(l,"remote");c[l.name]=k.message=b.isFunction(e)?e(i):e;a.showErrors(c)}k.valid=d;a.stopRequest(l,d)}},h));return"pending"},minlength:function(f,a,e){return this.optional(a)||this.getLength(b.trim(f),a)>=e},maxlength:function(f,a,e){return this.optional(a)||this.getLength(b.trim(f),a)<=e},rangelength:function(g,a,f){var h=this.getLength(b.trim(g),a);return this.optional(a)||(h>=f[0]&&h<=f[1])},min:function(f,a,e){return this.optional(a)||f>=e},max:function(f,a,e){return this.optional(a)||f<=e},range:function(f,a,e){return this.optional(a)||(f>=e[0]&&f<=e[1])},email:function(d,a){return this.optional(a)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(d)},url:function(d,a){return this.optional(a)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(d)},date:function(d,a){return this.optional(a)||!/Invalid|NaN/.test(new Date(d))},dateISO:function(d,a){return this.optional(a)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(d)},number:function(d,a){return this.optional(a)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(d)},digits:function(d,a){return this.optional(a)||/^\d+$/.test(d)},creditcard:function(k,n){if(this.optional(n)){return"dependency-mismatch"}if(/[^0-9 -]+/.test(k)){return false}var j=0,l=0,a=false;k=k.replace(/\D/g,"");for(var i=k.length-1;i>=0;i--){var m=k.charAt(i);var l=parseInt(m,10);if(a){if((l*=2)>9){l-=9}}j+=l;a=!a}return(j%10)==0},accept:function(f,a,e){e=typeof e=="string"?e.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(a)||f.match(new RegExp(".("+e+")$","i"))},equalTo:function(h,a,f){var g=b(f).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){b(a).valid()});return h==g.val()}}});b.format=b.validator.format})(jQuery);(function(f){var e={};if(f.ajaxPrefilter){f.ajaxPrefilter(function(b,c,a){var h=b.port;if(b.mode=="abort"){if(e[h]){e[h].abort()}e[h]=a}})}else{var d=f.ajax;f.ajax=function(b){var a=("mode" in b?b:f.ajaxSettings).mode,c=("port" in b?b:f.ajaxSettings).port;if(a=="abort"){if(e[c]){e[c].abort()}return(e[c]=d.apply(this,arguments))}return d.apply(this,arguments)}}})(jQuery);(function(b){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){b.each({focus:"focusin",blur:"focusout"},function(f,a){b.event.special[a]={setup:function(){this.addEventListener(f,e,true)},teardown:function(){this.removeEventListener(f,e,true)},handler:function(c){arguments[0]=b.event.fix(c);arguments[0].type=a;return b.event.handle.apply(this,arguments)}};function e(c){c=b.event.fix(c);c.type=a;return b.event.handle.call(this,c)}})}b.extend(b.fn,{validateDelegate:function(e,f,a){return this.bind(f,function(d){var c=b(d.target);if(c.is(e)){return a.apply(c,arguments)}})}})})(jQuery);(function(b){b(function(){ep.require("jquery/plugins/jquery.validate-1.9.0.js",function(){jQuery.validator.addMethod("multiemail",function(f,g){if(this.optional(g)){return true}var a;var h=f.split(new RegExp("\\s*;\\s*","gi"));isValid=true;for(a in h){if(h.hasOwnProperty(a)){isValid=isValid&&jQuery.validator.methods.email.call(this,h[a],g)}}return isValid},"Please enter a valid email address.")})})})(jQuery);(function(b){b.fn.cleanWhitespace=function(){this.contents().filter(function(){return(this.nodeType===3&&!/\S/.test(this.nodeValue))}).remove();return this}})(jQuery);